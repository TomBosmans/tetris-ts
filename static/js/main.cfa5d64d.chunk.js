(this["webpackJsonptetris-ts"]=this["webpackJsonptetris-ts"]||[]).push([[0],{16:function(e,t,E){e.exports=E(23)},23:function(e,t,E){"use strict";E.r(t);var n=E(0),T=E.n(n),r=E(11),M=E.n(r);function Y(e,t){var E=Object(n.useRef)();Object(n.useEffect)((function(){E.current=e}),[e]),Object(n.useEffect)((function(){if(null!==t){var e=setInterval((function(){return E.current&&E.current()}),t);return function(){return clearInterval(e)}}}),[t])}function P(e){var t=e.width,E=e.height,r=e.draw,M=e.delay,P=void 0===M?1e3:M,c=Object(n.useRef)(null);return Y((function(){var e=c.current,t=null===e||void 0===e?void 0:e.getContext("2d");t&&r(t)}),P),T.a.createElement("canvas",{ref:c,width:t,height:E})}var c,u=[0,40,100,300,1200],a=[48,43,38,33,28,23,18,13,8,6,5,5,5,4,4,4,3,3,3,2,2,2,2,2,2,2,2,2,2,1];!function(e){e.EMPTY=" ",e.O="o",e.S="s",e.Z="z",e.I="i",e.J="j",e.T="t",e.L="l"}(c||(c={}));var o,l={" ":"#e5e9f0",o:"#bf616a",s:"#d08770",z:"#ebcb8b",i:"#a3be8c",j:"#b48ead",t:"#5e81ac",l:"#8fbcbb"};!function(e){e.MOVE_BLOCK_DOWN="MOVE_BLOCK_DOWN",e.MOVE_BLOCK_LEFT="MOVE_BLOCK_LEFT",e.MOVE_BLOCK_RIGHT="MOVE_BLOCK_RIGHT",e.ROTATE_BLOCK_LEFT="ROTATE_BLOCK_LEFT",e.ROTATE_BLOCK_RIGHT="ROTATE_BLOCK_RIGHT",e.PAUSE="PAUSE",e.PLAY="PLAY"}(o||(o={}));var i={o:[[[c.EMPTY,c.EMPTY,c.EMPTY,c.EMPTY],[c.EMPTY,c.O,c.O,c.EMPTY],[c.EMPTY,c.O,c.O,c.EMPTY],[c.EMPTY,c.EMPTY,c.EMPTY,c.EMPTY]]],s:[[[c.EMPTY,c.EMPTY,c.EMPTY,c.EMPTY],[c.EMPTY,c.S,c.S,c.EMPTY],[c.S,c.S,c.EMPTY,c.EMPTY],[c.EMPTY,c.EMPTY,c.EMPTY,c.EMPTY]],[[c.S,c.EMPTY,c.EMPTY,c.EMPTY],[c.S,c.S,c.EMPTY,c.EMPTY],[c.EMPTY,c.S,c.EMPTY,c.EMPTY],[c.EMPTY,c.EMPTY,c.EMPTY,c.EMPTY]]],z:[[[c.EMPTY,c.EMPTY,c.EMPTY,c.EMPTY],[c.Z,c.Z,c.EMPTY,c.EMPTY],[c.EMPTY,c.Z,c.Z,c.EMPTY],[c.EMPTY,c.EMPTY,c.EMPTY,c.EMPTY]],[[c.EMPTY,c.Z,c.EMPTY,c.EMPTY],[c.Z,c.Z,c.EMPTY,c.EMPTY],[c.Z,c.EMPTY,c.EMPTY,c.EMPTY],[c.EMPTY,c.EMPTY,c.EMPTY,c.EMPTY]]],i:[[[c.EMPTY,c.EMPTY,c.EMPTY,c.EMPTY],[c.I,c.I,c.I,c.I],[c.EMPTY,c.EMPTY,c.EMPTY,c.EMPTY],[c.EMPTY,c.EMPTY,c.EMPTY,c.EMPTY]],[[c.EMPTY,c.I,c.EMPTY,c.EMPTY],[c.EMPTY,c.I,c.EMPTY,c.EMPTY],[c.EMPTY,c.I,c.EMPTY,c.EMPTY],[c.EMPTY,c.I,c.EMPTY,c.EMPTY]]],j:[[[c.EMPTY,c.EMPTY,c.EMPTY,c.EMPTY],[c.J,c.J,c.J,c.EMPTY],[c.EMPTY,c.EMPTY,c.J,c.EMPTY],[c.EMPTY,c.EMPTY,c.EMPTY,c.EMPTY]],[[c.EMPTY,c.J,c.EMPTY,c.EMPTY],[c.EMPTY,c.J,c.EMPTY,c.EMPTY],[c.J,c.J,c.EMPTY,c.EMPTY],[c.EMPTY,c.EMPTY,c.EMPTY,c.EMPTY]],[[c.J,c.EMPTY,c.EMPTY,c.EMPTY],[c.J,c.J,c.J,c.EMPTY],[c.EMPTY,c.EMPTY,c.EMPTY,c.EMPTY],[c.EMPTY,c.EMPTY,c.EMPTY,c.EMPTY]],[[c.EMPTY,c.J,c.J,c.EMPTY],[c.EMPTY,c.J,c.EMPTY,c.EMPTY],[c.EMPTY,c.J,c.EMPTY,c.EMPTY],[c.EMPTY,c.EMPTY,c.EMPTY,c.EMPTY]]],t:[[[c.EMPTY,c.EMPTY,c.EMPTY,c.EMPTY],[c.T,c.T,c.T,c.EMPTY],[c.EMPTY,c.T,c.EMPTY,c.EMPTY],[c.EMPTY,c.EMPTY,c.EMPTY,c.EMPTY]],[[c.EMPTY,c.T,c.EMPTY,c.EMPTY],[c.T,c.T,c.EMPTY,c.EMPTY],[c.EMPTY,c.T,c.EMPTY,c.EMPTY],[c.EMPTY,c.EMPTY,c.EMPTY,c.EMPTY]],[[c.EMPTY,c.T,c.EMPTY,c.EMPTY],[c.T,c.T,c.T,c.EMPTY],[c.EMPTY,c.EMPTY,c.EMPTY,c.EMPTY],[c.EMPTY,c.EMPTY,c.EMPTY,c.EMPTY]],[[c.EMPTY,c.T,c.EMPTY,c.EMPTY],[c.EMPTY,c.T,c.T,c.EMPTY],[c.EMPTY,c.T,c.EMPTY,c.EMPTY],[c.EMPTY,c.EMPTY,c.EMPTY,c.EMPTY]]],l:[[[c.EMPTY,c.EMPTY,c.EMPTY,c.EMPTY],[c.L,c.L,c.L,c.EMPTY],[c.L,c.EMPTY,c.EMPTY,c.EMPTY],[c.EMPTY,c.EMPTY,c.EMPTY,c.EMPTY]],[[c.L,c.L,c.EMPTY,c.EMPTY],[c.EMPTY,c.L,c.EMPTY,c.EMPTY],[c.EMPTY,c.L,c.EMPTY,c.EMPTY],[c.EMPTY,c.EMPTY,c.EMPTY,c.EMPTY]],[[c.EMPTY,c.EMPTY,c.L,c.EMPTY],[c.L,c.L,c.L,c.EMPTY],[c.EMPTY,c.EMPTY,c.EMPTY,c.EMPTY],[c.EMPTY,c.EMPTY,c.EMPTY,c.EMPTY]],[[c.EMPTY,c.L,c.EMPTY,c.EMPTY],[c.EMPTY,c.L,c.EMPTY,c.EMPTY],[c.EMPTY,c.L,c.L,c.EMPTY],[c.EMPTY,c.EMPTY,c.EMPTY,c.EMPTY]]]},f=E(15),s=E(1),O=E(8),v=function(){return Array(10).fill(c.EMPTY)};function d(){var e=[c.I,c.J,c.L,c.O,c.S,c.T,c.Z],t=Math.floor(Math.random()*e.length);return{shape:e[t],offsetX:3,offsetY:0,rotation:0}}function L(e,t){var E=i[e.shape][e.rotation],n=[0,1,2,3];return n.every((function(T){return n.every((function(n){var r=e.offsetX+T,M=e.offsetY+n;return!(E[n][T]!==c.EMPTY&&(r<0||r>9||M>17||t[M][r]!==c.EMPTY))}))}))}function B(e){var t=Object(O.a)(e);return e.forEach((function(e,E){e.every((function(e){return e!==c.EMPTY}))&&(t.splice(E,1),t.unshift(v()))})),t}function _(e,t){var E=e.score,n=e.level;return E+u[t]*(n+1)}var b=function(e){var t=e.currentBlock.offsetY+1,E=Object(s.a)({},e.currentBlock,{offsetY:t});if(L(E,e.grid))return Object(s.a)({},e,{currentBlock:E});var n=function(e,t){var E=i[e.shape][e.rotation],n=[0,1,2,3],T=Object(O.a)(t);return n.forEach((function(t){n.forEach((function(n){var r=e.offsetX+t,M=e.offsetY+n,Y=E[n][t];Y!==c.EMPTY&&(T[M][r]=Y)}))})),T}(e.currentBlock,e.grid),T=function(e){return e.map((function(e){return e.every((function(e){return e!==c.EMPTY}))?1:0})).reduce((function(e,t){return e+t}),0)}(n),r=e.lines+T,M=Math.floor(r/10),Y=e.level>M?e.level:M;return Object(s.a)({},e,{lines:r,level:Y,grid:B(n),currentBlock:e.nextBlock,nextBlock:d(),score:_(e,T)})};function h(e,t){switch(t.type){case o.MOVE_BLOCK_DOWN:return b(e);case o.MOVE_BLOCK_LEFT:return function(e){var t=e.currentBlock.offsetX-1,E=Object(s.a)({},e.currentBlock,{offsetX:t});return L(E,e.grid)?Object(s.a)({},e,{currentBlock:E}):e}(e);case o.MOVE_BLOCK_RIGHT:return function(e){var t=e.currentBlock.offsetX+1,E=Object(s.a)({},e.currentBlock,{offsetX:t});return L(E,e.grid)?Object(s.a)({},e,{currentBlock:E}):e}(e);case o.ROTATE_BLOCK_LEFT:return function(e){var t=i[e.currentBlock.shape],E=e.currentBlock.rotation,n=E>=t.length-1?Object(s.a)({},e.currentBlock,{rotation:0}):Object(s.a)({},e.currentBlock,{rotation:E+1});return L(n,e.grid)?Object(s.a)({},e,{currentBlock:n}):e}(e);case o.ROTATE_BLOCK_RIGHT:return e;case o.PAUSE:return Object(s.a)({},e,{pause:!0});case o.PLAY:return Object(s.a)({},e,{pause:!1});default:return e}}var j={level:0,score:0,lines:0,pause:!1,grid:Array(18).fill(null).map((function(){return v()})),currentBlock:d(),nextBlock:d(),keybindings:{37:o.MOVE_BLOCK_LEFT,38:o.ROTATE_BLOCK_LEFT,39:o.MOVE_BLOCK_RIGHT,40:o.MOVE_BLOCK_DOWN,41:o.ROTATE_BLOCK_RIGHT}},k=Object(n.createContext)({state:j,dispatch:function(){return null}});function C(e){var t=e.children,E=Object(n.useReducer)(h,j),r=Object(f.a)(E,2),M=r[0],Y=r[1];return T.a.createElement(k.Provider,{value:{state:M,dispatch:Y}},t)}function p(){var e=Object(n.useContext)(k),t=e.state,E=t.grid,r=t.currentBlock,M=t.level,u=t.pause,f=e.dispatch;return Y((function(){return f({type:o.MOVE_BLOCK_DOWN})}),u?null:(a[M]||a[a.length-1])/60*1e3),T.a.createElement(P,{draw:function(e){e.clearRect(0,0,520,936),function(e){for(var t=0,n=0;n<10;t+=52,n++)for(var T=0,r=0;r<18;T+=52,r++){var M=E[r][n];e.fillStyle=l[M],e.fillRect(t,T,50,50)}}(e),function(e){for(var t=0,E=0;E<4;t+=52,E++)for(var n=0,T=0;T<4;n+=52,T++){var M=r.shape,Y=r.rotation,P=52*r.offsetX+t,u=52*r.offsetY+n,a=i[M][Y][T][E];a!==c.EMPTY&&(e.fillStyle=l[a],e.fillRect(P,u,50,50))}}(e)},width:520,height:936,delay:2})}function y(){var e=Object(n.useContext)(k),t=e.state.keybindings,E=e.dispatch;return Object(n.useEffect)((function(){var e=function(e){t[e.keyCode]===o.MOVE_BLOCK_DOWN&&E({type:o.PAUSE}),E({type:t[e.keyCode]})};return window.addEventListener("keydown",e),function(){return window.removeEventListener("keydown",e)}}),[t,E]),Object(n.useEffect)((function(){var e=function(e){t[e.keyCode]===o.MOVE_BLOCK_DOWN&&E({type:o.PLAY})};return window.addEventListener("keyup",e),function(){return window.removeEventListener("keyup",e)}}),[t,E]),T.a.createElement(T.a.Fragment,null)}function m(){var e=Object(n.useContext)(k).state.score;return T.a.createElement("div",null,"Score: ",e)}function K(){var e=Object(n.useContext)(k).state.level;return T.a.createElement("div",null,"Level: ",e)}function R(){var e=Object(n.useContext)(k).state.nextBlock;return T.a.createElement(P,{draw:function(t){for(var E=i[e.shape][e.rotation],n=0,T=0;T<4;n+=52,T++)for(var r=0,M=0;M<4;r+=52,M++){var Y=E[M][T];t.fillStyle=l[Y],t.fillRect(n,r,50,50)}},width:208,height:208,delay:2})}var I=E(5),g=E(6);function w(){var e=Object(I.a)(["\n  display: flex;\n  flex-direction: column;\n"]);return w=function(){return e},e}function J(){var e=Object(I.a)(["\n  display: flex;\n  justify-content: center;\n"]);return J=function(){return e},e}var S=g.a.div(J()),A=g.a.div(w());function x(){return T.a.createElement(C,null,T.a.createElement(y,null),T.a.createElement(p,null),T.a.createElement(A,null,T.a.createElement(R,null),T.a.createElement(m,null),T.a.createElement(K,null)))}function V(){return T.a.createElement(S,null,T.a.createElement(x,null))}function Z(){return T.a.createElement(V,null)}M.a.render(T.a.createElement(T.a.StrictMode,null,T.a.createElement(Z,null)),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.cfa5d64d.chunk.js.map