{"version":3,"sources":["constants/index.ts","lib/index.ts","state/reducer.ts","utils/index.ts","PlayfieldProvider.tsx","components/Keybindings/Keybindings.tsx","hooks/useInterval.ts","components/Canvas/Canvas.tsx","styled/index.ts","components/Arena/Arena.tsx","components/Details/Details.tsx","components/Preview/Preview.tsx","components/Game/Game.tsx","App.tsx","index.tsx"],"names":["CELL","SCORES_PER_LINES","SPEED_PER_LEVEL","ACTION","CELL_COLORS","BLOCKS","EMPTY","O","S","Z","I","J","T","L","generateEmptyRow","Array","fill","randomBlock","possibleBlocks","randomIndex","Math","floor","random","length","shape","offsetX","offsetY","rotation","canBlockMove","block","grid","indexes","every","rowIndex","columnIndex","x","y","COLUMNS","ROWS","removeCompletedRows","newGrid","forEach","row","cell","splice","unshift","increaseScore","completedRowsCount","score","level","setNextBlock","state","restBlock","currentBlock","map","reduce","a","b","totalCompletedRows","lines","newLevel","nextBlock","gameOver","reducer","action","type","MOVE_BLOCK_DOWN","moveBlockDown","MOVE_BLOCK_LEFT","moveBlockLeft","MOVE_BLOCK_RIGHT","moveBlockRight","ROTATE_BLOCK_LEFT","rotations","currentRotation","rotateBlockLeft","ROTATE_BLOCK_RIGHT","START_AUTO_DROP","autoDrop","STOP_AUTO_DROP","initialState","keybindings","37","38","39","40","41","PlayfieldContext","createContext","dispatch","PlayfieldProvider","children","useReducer","Provider","value","Keybindings","useContext","useEffect","handleKey","event","keyCode","window","addEventListener","removeEventListener","useInterval","callback","delay","savedCallback","useRef","current","id","setInterval","clearInterval","Canvas","width","height","draw","ref","canvas","context","getContext","GlobalStyle","createGlobalStyle","border","PlayfieldStyle","styled","div","ArenaStyle","PreviewStyle","DetailsStyle","GameOverStyle","Arena","clearRect","i","CELL_SIZE","j","fillStyle","fillRect","drawGrid","rectX","rectY","drawCurrentBlock","Details","Preview","Game","App","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.8cf45b1e.chunk.js","sourcesContent":["import { Cell } from \"src/types\"\n\nexport const COLUMNS = 10\nexport const ROWS = 18\nexport const CELL_SIZE = 45\nexport const PADDING = 2\nexport const WIDTH = COLUMNS * (CELL_SIZE + PADDING) - PADDING\nexport const HEIGHT = ROWS * (CELL_SIZE + PADDING) - PADDING\nexport const SCORES_PER_LINES = [0, 40, 100, 300, 1200]\nexport const SPEED_PER_LEVEL = [\n  48, 43, 38, 33, 28, 23, 18, 13,  8,  6,\n   5,  5,  5,  4,  4,  4,  3,  3,  3,  2,\n   2,  2,  2,  2,  2,  2,  2,  2,  2,  1\n]\n\nexport enum CELL {\n  EMPTY = \" \",\n      O = \"o\",\n      S = \"s\",\n      Z = \"z\",\n      I = \"i\",\n      J = \"j\",\n      T = \"t\",\n      L = \"l\"\n}\n\nexport const CELL_COLORS = {\n  \" \": \"#434c5e\",\n  \"o\": \"#bf616a\",\n  \"s\": \"#d08770\",\n  \"z\": \"#ebcb8b\",\n  \"i\": \"#a3be8c\",\n  \"j\": \"#b48ead\",\n  \"t\": \"#5e81ac\",\n  \"l\": \"#8fbcbb\"\n}\n\nexport enum ACTION {\n  MOVE_BLOCK_DOWN = \"MOVE_BLOCK_DOWN\",\n  MOVE_BLOCK_LEFT = \"MOVE_BLOCK_LEFT\",\n  MOVE_BLOCK_RIGHT = \"MOVE_BLOCK_RIGHT\",\n  ROTATE_BLOCK_LEFT = \"ROTATE_BLOCK_LEFT\",\n  ROTATE_BLOCK_RIGHT = \"ROTATE_BLOCK_RIGHT\",\n  STOP_AUTO_DROP = \"STOP_AUTO_DROP\",\n  START_AUTO_DROP = \"START_AUTO_DROP\"\n}\n\nconst o: Cell[][][] = [[\n  [CELL.EMPTY, CELL.EMPTY, CELL.EMPTY, CELL.EMPTY],\n  [CELL.EMPTY, CELL.O    , CELL.O    , CELL.EMPTY],\n  [CELL.EMPTY, CELL.O    , CELL.O    , CELL.EMPTY],\n  [CELL.EMPTY, CELL.EMPTY, CELL.EMPTY, CELL.EMPTY]\n]]\n\nconst s: Cell[][][] = [[\n  [CELL.EMPTY, CELL.EMPTY, CELL.EMPTY, CELL.EMPTY],\n  [CELL.EMPTY, CELL.S    , CELL.S    , CELL.EMPTY],\n  [CELL.S    , CELL.S    , CELL.EMPTY, CELL.EMPTY],\n  [CELL.EMPTY, CELL.EMPTY, CELL.EMPTY, CELL.EMPTY]\n],\n[\n  [CELL.S    , CELL.EMPTY, CELL.EMPTY, CELL.EMPTY],\n  [CELL.S    , CELL.S    , CELL.EMPTY, CELL.EMPTY],\n  [CELL.EMPTY, CELL.S    , CELL.EMPTY, CELL.EMPTY],\n  [CELL.EMPTY, CELL.EMPTY, CELL.EMPTY, CELL.EMPTY]\n]]\n\nconst z: Cell[][][] = [[\n  [CELL.EMPTY, CELL.EMPTY, CELL.EMPTY, CELL.EMPTY],\n  [CELL.Z    , CELL.Z    , CELL.EMPTY, CELL.EMPTY],\n  [CELL.EMPTY, CELL.Z    , CELL.Z    , CELL.EMPTY],\n  [CELL.EMPTY, CELL.EMPTY, CELL.EMPTY, CELL.EMPTY]\n],\n[\n  [CELL.EMPTY, CELL.Z    , CELL.EMPTY, CELL.EMPTY],\n  [CELL.Z    , CELL.Z    , CELL.EMPTY, CELL.EMPTY],\n  [CELL.Z    , CELL.EMPTY, CELL.EMPTY, CELL.EMPTY],\n  [CELL.EMPTY, CELL.EMPTY, CELL.EMPTY, CELL.EMPTY]\n]]\n\nconst i: Cell[][][] = [[\n  [CELL.EMPTY, CELL.EMPTY, CELL.EMPTY, CELL.EMPTY],\n  [CELL.I    , CELL.I    , CELL.I    , CELL.I    ],\n  [CELL.EMPTY, CELL.EMPTY, CELL.EMPTY, CELL.EMPTY],\n  [CELL.EMPTY, CELL.EMPTY, CELL.EMPTY, CELL.EMPTY]\n],\n[\n  [CELL.EMPTY, CELL.I    , CELL.EMPTY, CELL.EMPTY],\n  [CELL.EMPTY, CELL.I    , CELL.EMPTY, CELL.EMPTY],\n  [CELL.EMPTY, CELL.I    , CELL.EMPTY, CELL.EMPTY],\n  [CELL.EMPTY, CELL.I    , CELL.EMPTY, CELL.EMPTY]\n]]\n\nconst j: Cell[][][] = [[\n  [CELL.EMPTY, CELL.EMPTY, CELL.EMPTY, CELL.EMPTY],\n  [CELL.J    , CELL.J    , CELL.J    , CELL.EMPTY],\n  [CELL.EMPTY, CELL.EMPTY, CELL.J    , CELL.EMPTY],\n  [CELL.EMPTY, CELL.EMPTY, CELL.EMPTY, CELL.EMPTY]\n],\n[\n  [CELL.EMPTY, CELL.J    , CELL.EMPTY, CELL.EMPTY],\n  [CELL.EMPTY, CELL.J    , CELL.EMPTY, CELL.EMPTY],\n  [CELL.J    , CELL.J    , CELL.EMPTY, CELL.EMPTY],\n  [CELL.EMPTY, CELL.EMPTY, CELL.EMPTY, CELL.EMPTY]\n],\n[\n  [CELL.J    , CELL.EMPTY, CELL.EMPTY, CELL.EMPTY],\n  [CELL.J    , CELL.J    , CELL.J    , CELL.EMPTY],\n  [CELL.EMPTY, CELL.EMPTY, CELL.EMPTY, CELL.EMPTY],\n  [CELL.EMPTY, CELL.EMPTY, CELL.EMPTY, CELL.EMPTY]\n],\n[\n  [CELL.EMPTY, CELL.J, CELL.J, CELL.EMPTY],\n  [CELL.EMPTY, CELL.J, CELL.EMPTY, CELL.EMPTY],\n  [CELL.EMPTY, CELL.J, CELL.EMPTY, CELL.EMPTY],\n  [CELL.EMPTY, CELL.EMPTY, CELL.EMPTY, CELL.EMPTY]\n]]\n\nconst t: Cell[][][] = [[\n  [CELL.EMPTY, CELL.EMPTY, CELL.EMPTY, CELL.EMPTY],\n  [CELL.T    , CELL.T    , CELL.T    , CELL.EMPTY],\n  [CELL.EMPTY, CELL.T    , CELL.EMPTY, CELL.EMPTY],\n  [CELL.EMPTY, CELL.EMPTY, CELL.EMPTY, CELL.EMPTY]\n],\n[\n  [CELL.EMPTY, CELL.T    , CELL.EMPTY, CELL.EMPTY],\n  [CELL.T    , CELL.T    , CELL.EMPTY, CELL.EMPTY],\n  [CELL.EMPTY, CELL.T    , CELL.EMPTY, CELL.EMPTY],\n  [CELL.EMPTY, CELL.EMPTY, CELL.EMPTY, CELL.EMPTY]\n],\n[\n  [CELL.EMPTY, CELL.T    , CELL.EMPTY, CELL.EMPTY],\n  [CELL.T    , CELL.T    , CELL.T    , CELL.EMPTY],\n  [CELL.EMPTY, CELL.EMPTY, CELL.EMPTY, CELL.EMPTY],\n  [CELL.EMPTY, CELL.EMPTY, CELL.EMPTY, CELL.EMPTY]\n],\n[\n  [CELL.EMPTY, CELL.T    , CELL.EMPTY, CELL.EMPTY],\n  [CELL.EMPTY, CELL.T    , CELL.T    , CELL.EMPTY],\n  [CELL.EMPTY, CELL.T    , CELL.EMPTY, CELL.EMPTY],\n  [CELL.EMPTY, CELL.EMPTY, CELL.EMPTY, CELL.EMPTY]\n\n]]\n\nconst l: Cell[][][] = [[\n  [CELL.EMPTY, CELL.EMPTY, CELL.EMPTY, CELL.EMPTY],\n  [CELL.L    , CELL.L    , CELL.L    , CELL.EMPTY],\n  [CELL.L    , CELL.EMPTY, CELL.EMPTY, CELL.EMPTY],\n  [CELL.EMPTY, CELL.EMPTY, CELL.EMPTY, CELL.EMPTY]\n],\n[\n  [CELL.L    , CELL.L    , CELL.EMPTY, CELL.EMPTY],\n  [CELL.EMPTY, CELL.L    , CELL.EMPTY, CELL.EMPTY],\n  [CELL.EMPTY, CELL.L    , CELL.EMPTY, CELL.EMPTY],\n  [CELL.EMPTY, CELL.EMPTY, CELL.EMPTY, CELL.EMPTY]\n],\n[\n  [CELL.EMPTY, CELL.EMPTY, CELL.L    , CELL.EMPTY],\n  [CELL.L    , CELL.L    , CELL.L    , CELL.EMPTY],\n  [CELL.EMPTY, CELL.EMPTY, CELL.EMPTY, CELL.EMPTY],\n  [CELL.EMPTY, CELL.EMPTY, CELL.EMPTY, CELL.EMPTY]\n],\n[\n  [CELL.EMPTY, CELL.L    , CELL.EMPTY, CELL.EMPTY],\n  [CELL.EMPTY, CELL.L    , CELL.EMPTY, CELL.EMPTY],\n  [CELL.EMPTY, CELL.L    , CELL.L    , CELL.EMPTY],\n  [CELL.EMPTY, CELL.EMPTY, CELL.EMPTY, CELL.EMPTY]\n\n]]\n \nexport const BLOCKS: Record<string, Cell[][][]> = {\n  \"o\": o,\n  \"s\": s,\n  \"z\": z,\n  \"i\": i,\n  \"j\": j,\n  \"t\": t,\n  \"l\": l\n}\n","import { ROWS, COLUMNS, CELL, BLOCKS, SCORES_PER_LINES } from \"src/constants\"\nimport { Grid, Block, Row, PlayfieldState, Cell } from \"src/types\"\nimport { sum } from \"src/utils\"\n\nexport const generateEmptyRow = (): Row =>\n  Array(COLUMNS).fill(CELL.EMPTY)\n\nexport const generateGrid = (): Grid =>\n  Array(ROWS).fill(null).map(() => generateEmptyRow() )\n\nexport const generateBlock = (shape: string): Block => ({\n  shape: shape,\n  offsetX: 3,\n  offsetY: 0,\n  rotation: 0\n})\n\nexport function randomBlock(): Block {\n  const possibleBlocks = [CELL.I, CELL.J, CELL.L, CELL.O, CELL.S, CELL.T, CELL.Z]\n  const randomIndex = Math.floor(Math.random() * possibleBlocks.length)\n  return generateBlock(possibleBlocks[randomIndex])\n}\n\nexport function canBlockMove(block: Block, grid: Grid): boolean {\n  const shape: Grid = BLOCKS[block.shape][block.rotation]\n  const indexes = [0, 1, 2, 3]\n\n  return indexes.every((rowIndex) => {\n    return indexes.every((columnIndex) => {\n      const x = block.offsetX + rowIndex\n      const y = block.offsetY + columnIndex\n\n      const canMove = shape[columnIndex][rowIndex] !== CELL.EMPTY && (\n        x < 0 // left border\n        || x > COLUMNS - 1 // right border\n        || y > ROWS - 1 // bottom border\n        || grid[y][x] !== CELL.EMPTY // already filled\n      )\n\n      return !canMove\n    })\n  })\n}\n\nexport function restBlock(block: Block, grid: Grid): Grid {\n  const shape: Grid = BLOCKS[block.shape][block.rotation]\n  const indexes = [0, 1, 2, 3]\n  const newGrid = [...grid]\n\n  indexes.forEach((rowIndex) => {\n    indexes.forEach((columnIndex) => {\n      const x = block.offsetX + rowIndex\n      const y = block.offsetY + columnIndex\n      const cell = shape[columnIndex][rowIndex]\n\n      if (cell !== CELL.EMPTY) newGrid[y][x] = cell\n    })\n  })\n\n  return newGrid\n}\n\nexport function totalCompletedRows(grid: Grid): number {\n  return sum(grid.map((row: Row) => {\n    const complete = row.every((cell: Cell) => cell !== CELL.EMPTY) \n    return complete ? 1 : 0\n  }))\n}\n\nexport function removeCompletedRows(grid: Grid): Grid {\n  const newGrid = [...grid]\n  grid.forEach((row: Row, rowIndex: number) => {\n    const complete = row.every((cell: Cell) => cell !== CELL.EMPTY)\n    if (!complete) return\n    newGrid.splice(rowIndex, 1) // remove completed row\n    newGrid.unshift(generateEmptyRow()) // add new empty row on top\n  })\n\n  return newGrid\n}\n\nexport function increaseScore({ score, level }: PlayfieldState, completedRowsCount: number): number {\n  return score + SCORES_PER_LINES[completedRowsCount] * (level + 1)\n}\n","import { PlayfieldState, Action } from \"src/types\"\nimport { ACTION, BLOCKS } from \"src/constants\"\nimport { canBlockMove, restBlock, randomBlock, removeCompletedRows, totalCompletedRows, increaseScore } from \"src/lib\"\n\nconst setNextBlock = (state: PlayfieldState): PlayfieldState => {\n  const grid = restBlock(state.currentBlock, state.grid)\n  const completedRowsCount = totalCompletedRows(grid)\n  const lines = state.lines + completedRowsCount\n  const newLevel = Math.floor(lines/10)\n  const level = state.level > newLevel ? state.level : newLevel\n  const currentBlock = state.nextBlock\n  const gameOver = !canBlockMove(currentBlock, grid)\n\n  return {\n    ...state,\n    lines: lines,\n    level: level,\n    grid: removeCompletedRows(grid),\n    currentBlock: currentBlock,\n    nextBlock: randomBlock(),\n    score: increaseScore(state, completedRowsCount),\n    gameOver: gameOver,\n  }\n}\n\nconst moveBlockDown = (state: PlayfieldState): PlayfieldState => {\n  const offsetY = state.currentBlock.offsetY + 1\n  const currentBlock = { ...state.currentBlock, offsetY: offsetY }\n  const canMove = canBlockMove(currentBlock, state.grid)\n\n  return canMove ? { ...state, currentBlock: currentBlock } : setNextBlock(state)\n}\n\nconst moveBlockLeft = (state: PlayfieldState): PlayfieldState => {\n  const offsetX = state.currentBlock.offsetX - 1\n  const currentBlock = { ...state.currentBlock, offsetX: offsetX }\n  return canBlockMove(currentBlock, state.grid) ?\n    { ...state, currentBlock: currentBlock } : state\n}\n\nconst moveBlockRight = (state: PlayfieldState): PlayfieldState => {\n  const offsetX = state.currentBlock.offsetX + 1\n  const currentBlock = { ...state.currentBlock, offsetX: offsetX }\n  return canBlockMove(currentBlock, state.grid) ?\n    { ...state, currentBlock: currentBlock } : state\n}\n\nconst rotateBlockLeft = (state: PlayfieldState): PlayfieldState => {\n  const rotations = BLOCKS[state.currentBlock.shape]\n  const currentRotation = state.currentBlock.rotation\n  const currentBlock = (currentRotation >= rotations.length - 1) ?\n    { ...state.currentBlock, rotation: 0 } :  { ...state.currentBlock, rotation: currentRotation + 1 }\n\n  return canBlockMove(currentBlock, state.grid) ?\n    { ...state, currentBlock: currentBlock } : state\n}\n\nconst rotateBlockRight = (state: PlayfieldState): PlayfieldState => {\n  return state\n}\n\nexport default function reducer(state: PlayfieldState, action: Action) {\n  switch(action.type) {\n    case ACTION.MOVE_BLOCK_DOWN:\n      return moveBlockDown(state)\n    case ACTION.MOVE_BLOCK_LEFT:\n      return moveBlockLeft(state)\n    case ACTION.MOVE_BLOCK_RIGHT:\n      return moveBlockRight(state)\n    case ACTION.ROTATE_BLOCK_LEFT:\n      return rotateBlockLeft(state)\n    case ACTION.ROTATE_BLOCK_RIGHT:\n      return rotateBlockRight(state)\n    case ACTION.START_AUTO_DROP:\n      return { ...state, autoDrop: true }\n    case ACTION.STOP_AUTO_DROP:\n      return { ...state, autoDrop: false }\n    default:\n      return state\n  }\n}\n","type TimesFunction = (index: number) => any\nexport const times = (number: number, f: TimesFunction): any[] =>\n  Array.from({ length: number }).map((_, i) => f(i))\n\nexport const sum = (array: number[]): number =>\n  array.reduce((a: number, b: number) => a + b, 0)\n","import React, { createContext, useReducer, Dispatch } from \"react\"\nimport { PlayfieldState } from \"src/types\"\nimport { reducer } from \"src/state\"\nimport { generateGrid, randomBlock } from \"src/lib\"\nimport { ACTION } from \"./constants\"\n\nconst initialState: PlayfieldState = {\n  level: 0,\n  score: 0,\n  lines: 0,\n  autoDrop: true,\n  gameOver: false,\n  grid: generateGrid(),\n  currentBlock: randomBlock(),\n  nextBlock: randomBlock(),\n  keybindings: {\n    37: ACTION.MOVE_BLOCK_LEFT,\n    38: ACTION.ROTATE_BLOCK_LEFT,\n    39: ACTION.MOVE_BLOCK_RIGHT,\n    40: ACTION.MOVE_BLOCK_DOWN,\n    41: ACTION.ROTATE_BLOCK_RIGHT\n  }\n}\n\ntype PlayfieldContext = {\n  state: PlayfieldState,\n  dispatch: Dispatch<any>\n}\n\nexport const PlayfieldContext = createContext<PlayfieldContext>({\n  state: initialState,\n  dispatch: () => null\n})\n\ntype Props = {\n  children: React.ReactNode\n}\n\nexport default function PlayfieldProvider({ children }: Props) {\n  const [state, dispatch] = useReducer(reducer, initialState)\n\n  return (\n    <PlayfieldContext.Provider value={{state, dispatch}}>\n      {children}\n    </PlayfieldContext.Provider>\n  )\n}\n","import React, { useEffect, useContext } from \"react\"\nimport { PlayfieldContext } from \"src/PlayfieldProvider\"\nimport { ACTION } from \"src/constants\"\n\nexport default function Keybindings() {\n  const { state: { keybindings, gameOver }, dispatch } = useContext(PlayfieldContext)\n\n  useEffect(() => {\n    const handleKey = (event: KeyboardEvent) => {\n      if (keybindings[event.keyCode] === ACTION.MOVE_BLOCK_DOWN) {\n        dispatch({ type: ACTION.STOP_AUTO_DROP })\n      }\n      dispatch({ type: keybindings[event.keyCode] })\n    }\n\n    window.addEventListener(\"keydown\", handleKey);\n    return () => window.removeEventListener(\"keydown\", handleKey)\n  }, [keybindings, dispatch])\n\n  useEffect(() => {\n    const handleKey = (event: KeyboardEvent) => {\n      if (keybindings[event.keyCode] === ACTION.MOVE_BLOCK_DOWN) {\n        !gameOver && dispatch({ type: ACTION.START_AUTO_DROP })\n      }\n    }\n\n    window.addEventListener(\"keyup\", handleKey);\n    return () => window.removeEventListener(\"keyup\", handleKey)\n  }, [keybindings, dispatch, gameOver])\n\n  return (\n    <></>\n  )\n}\n","import { useEffect, useRef } from \"react\"\n\ntype CallbackFunction = () => void\n\nexport default function useInterval(callback: CallbackFunction, delay: number | null) {\n  const savedCallback = useRef<CallbackFunction>()\n\n  // Remember the latest callback.\n  useEffect(() => {\n    savedCallback.current = callback\n  }, [callback])\n\n  // Set up the interval.\n  useEffect(() => {\n    if (delay === null) return\n\n    const tick = () => savedCallback.current && savedCallback.current()\n    const id = setInterval(tick, delay)\n    return () => clearInterval(id)\n  }, [delay])\n}\n","import React, { useRef } from \"react\"\nimport { useInterval } from \"src/hooks\"\n\ntype Props = {\n  width: number\n  height: number\n  draw(context: CanvasRenderingContext2D): void\n  delay?: number\n}\n\nexport default function Canvas({ width, height, draw, delay=1000 }: Props) {\n  const ref = useRef<HTMLCanvasElement>(null)\n\n  useInterval(() => {\n    const canvas = ref.current\n    const context = canvas?.getContext(\"2d\")\n    if (context) draw(context)\n  }, delay);\n\n  return (\n    <canvas ref={ref} width={width} height={height} />\n  )\n}\n","import styled, { createGlobalStyle } from \"styled-components\"\nimport { WIDTH, HEIGHT, PADDING } from \"src/constants\"\n\nexport const GlobalStyle = createGlobalStyle`\n  body {\n    background: #2e3440;\n    width: 100vw;\n    height: 100vh;\n    overflow: hidden;\n    margin 0;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n`\n\nconst border = `${2*PADDING}px solid #4c566a`\n\nexport const PlayfieldStyle = styled.div`\n  color: #d8dee9;\n  font-weight: bold;\n\n  border: ${border};\n  border-radius: ${2*PADDING}px;\n\n  display: grid;\n  grid-template-areas:\n    \"arena arena details\"\n    \"arena arena preview\"\n    \"arena arena .\"\n    \"arena arena .\"\n    \"arena arena .\"\n`\n\nexport const ArenaStyle = styled.div`\n  grid-area: arena;\n\n  border: ${border};\n  border-left: 0px;\n  border-bottom: 0px;\n  border-top: 0px;\n\n  background: #4c566a; \n  width: ${WIDTH}px;\n  height: ${HEIGHT}px;\n`\nexport const PreviewStyle = styled.div`\n  grid-area: preview;\n\n  border-bottom: ${border};\n  padding: 20px;\n`\nexport const DetailsStyle = styled.div`\n  grid-area: details;\n  border-bottom: ${border};\n\n  ul {\n    list-style-type: none;\n    padding: 5px;\n  }\n`\nexport const GameOverStyle = styled.div`\n  height: 100%;\n\n  font-size: 2em;\n  color: #bf616a;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n`\n","import React, { useContext } from \"react\"\nimport Canvas from \"src/components/Canvas\"\nimport { COLUMNS, ROWS, CELL_SIZE, PADDING, CELL_COLORS, BLOCKS, ACTION, CELL, SPEED_PER_LEVEL, WIDTH, HEIGHT } from \"src/constants\"\nimport { Cell } from \"src/types\"\nimport { PlayfieldContext } from \"src/PlayfieldProvider\"\nimport { useInterval } from \"src/hooks\"\nimport { GameOverStyle } from \"src/styled\"\n\nexport default function Arena() {\n  const { state: { grid, currentBlock, level, autoDrop, gameOver }, dispatch } = useContext(PlayfieldContext)\n\n  const drawGrid = (context: CanvasRenderingContext2D) => {\n    for (let x = 0, i = 0; i < COLUMNS; x+=CELL_SIZE + PADDING, i++) {\n      for (let y = 0, j=0; j < ROWS; y+=CELL_SIZE + PADDING, j++) {\n        const cell: Cell = grid[j][i]\n        context.fillStyle = CELL_COLORS[cell]\n        context.fillRect(x, y, CELL_SIZE, CELL_SIZE);\n      }\n    }\n  }\n\n  const drawCurrentBlock = (context: CanvasRenderingContext2D) => {\n    for (let x = 0, i = 0; i < 4; x+=CELL_SIZE + PADDING, i++) {\n      for (let y = 0, j=0; j < 4; y+=CELL_SIZE + PADDING, j++) {\n        const { shape, rotation } = currentBlock\n        const rectX = (CELL_SIZE + PADDING) * currentBlock.offsetX + x\n        const rectY = (CELL_SIZE + PADDING) * currentBlock.offsetY + y\n        const cell: Cell = BLOCKS[shape][rotation][j][i]\n        if (cell !== CELL.EMPTY) {\n          context.fillStyle = CELL_COLORS[cell]\n          context.fillRect(rectX, rectY, CELL_SIZE, CELL_SIZE);\n        }\n      }\n    }\n  }\n\n  const draw = (context: CanvasRenderingContext2D) => {\n    context.clearRect(0, 0, WIDTH, HEIGHT);\n    drawGrid(context)\n    drawCurrentBlock(context)\n  }\n\n  const maxSpeed = SPEED_PER_LEVEL[SPEED_PER_LEVEL.length - 1]\n  const delay = autoDrop ? (SPEED_PER_LEVEL[level] || maxSpeed)/60 * 1000 : null\n  useInterval(() => dispatch({ type: ACTION.MOVE_BLOCK_DOWN }), delay)\n\n  if (gameOver) return <GameOverStyle>GAME OVER</GameOverStyle>\n  return (\n    <Canvas draw={draw} width={WIDTH} height={HEIGHT} delay={2} />\n  )\n}\n","import React, { useContext } from \"react\"\nimport { PlayfieldContext } from \"src/PlayfieldProvider\"\n\nexport default function Details() {\n  const { state: { lines, level, score } } = useContext(PlayfieldContext)\n\n  return (\n    <ul>\n      <li>LINES: {lines}</li>\n      <li>LEVEL: {level}</li>\n      <li>SCORE: {score}</li>\n    </ul>\n  )\n}\n","import React, { useContext } from \"react\"\nimport { PlayfieldContext } from \"src/PlayfieldProvider\"\nimport Canvas from \"../Canvas\"\nimport { CELL_SIZE, PADDING, BLOCKS, CELL_COLORS, CELL } from \"src/constants\"\nimport { Cell } from \"src/types\"\n\nexport default function Preview() {\n  const { state: { nextBlock } } = useContext(PlayfieldContext)\n\n  const size = 4 * (CELL_SIZE + PADDING)\n\n  const draw = (context: CanvasRenderingContext2D) => {\n    const grid = BLOCKS[nextBlock.shape][nextBlock.rotation]\n    context.clearRect(0, 0, size, size);\n\n    for (let x = 0, i = 0; i < 4; x+=CELL_SIZE + PADDING, i++) {\n      for (let y = 0, j=0; j < 4; y+=CELL_SIZE + PADDING, j++) {\n        const cell: Cell = grid[j][i]\n        if (cell !== CELL.EMPTY) {\n          context.fillStyle = CELL_COLORS[cell]\n          context.fillRect(x, y, CELL_SIZE, CELL_SIZE);\n        }\n      }\n    }\n  }\n\n  return (\n    <Canvas draw={draw} width={size} height={size} delay={2}/>\n  )\n}\n","import React from \"react\"\nimport PlayfieldProvider from \"src/PlayfieldProvider\"\nimport Keybindings from \"src/components/Keybindings\"\nimport Arena from \"src/components/Arena\"\nimport Details from \"src/components/Details\"\nimport Preview from \"src/components/Preview\"\nimport { GlobalStyle, PlayfieldStyle, ArenaStyle, DetailsStyle, PreviewStyle } from \"src/styled\"\n\nexport default function Game() {\n  return (\n    <PlayfieldProvider>\n      <GlobalStyle />\n      <Keybindings />\n\n      <PlayfieldStyle>\n       <ArenaStyle>\n          <Arena />\n        </ArenaStyle>\n\n        <DetailsStyle>\n          <Details/>\n        </DetailsStyle>\n\n        <PreviewStyle>\n          <Preview />\n        </PreviewStyle>\n     </PlayfieldStyle>\n    </PlayfieldProvider>\n  )\n}\n","import React from \"react\"\nimport Game from \"./components/Game\"\n\nexport default function App() {\n  return <Game />\n}\n","import React from \"react\"\nimport ReactDOM from \"react-dom\"\nimport App from \"./App\"\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n)\n"],"sourceRoot":""}