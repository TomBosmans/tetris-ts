(this["webpackJsonptetris-ts"]=this["webpackJsonptetris-ts"]||[]).push([[0],{16:function(e,t,T){e.exports=T(23)},23:function(e,t,T){"use strict";T.r(t);var E=T(0),n=T.n(E),r=T(11),M=T.n(r);function P(e,t){var T=Object(E.useRef)();Object(E.useEffect)((function(){T.current=e}),[e]),Object(E.useEffect)((function(){if(null!==t){var e=setInterval((function(){return T.current&&T.current()}),t);return function(){return clearInterval(e)}}}),[t])}function Y(e){var t=e.width,T=e.height,r=e.draw,M=e.delay,Y=void 0===M?1e3:M,c=Object(E.useRef)(null);return P((function(){var e=c.current,t=null===e||void 0===e?void 0:e.getContext("2d");t&&r(t)}),Y),n.a.createElement("canvas",{ref:c,width:t,height:T})}var c,u=[0,40,100,300,1200],a=[48,43,38,33,28,23,18,13,8,6,5,5,5,4,4,4,3,3,3,2,2,2,2,2,2,2,2,2,2,1];!function(e){e.EMPTY=" ",e.O="o",e.S="s",e.Z="z",e.I="i",e.J="j",e.T="t",e.L="l"}(c||(c={}));var o,l={" ":"#e5e9f0",o:"#bf616a",s:"#d08770",z:"#ebcb8b",i:"#a3be8c",j:"#b48ead",t:"#5e81ac",l:"#8fbcbb"};!function(e){e.MOVE_BLOCK_DOWN="MOVE_BLOCK_DOWN",e.MOVE_BLOCK_LEFT="MOVE_BLOCK_LEFT",e.MOVE_BLOCK_RIGHT="MOVE_BLOCK_RIGHT",e.ROTATE_BLOCK_LEFT="ROTATE_BLOCK_LEFT",e.ROTATE_BLOCK_RIGHT="ROTATE_BLOCK_RIGHT",e.STOP_AUTO_DROP="STOP_AUTO_DROP",e.START_AUTO_DROP="START_AUTO_DROP"}(o||(o={}));var i={o:[[[c.EMPTY,c.EMPTY,c.EMPTY,c.EMPTY],[c.EMPTY,c.O,c.O,c.EMPTY],[c.EMPTY,c.O,c.O,c.EMPTY],[c.EMPTY,c.EMPTY,c.EMPTY,c.EMPTY]]],s:[[[c.EMPTY,c.EMPTY,c.EMPTY,c.EMPTY],[c.EMPTY,c.S,c.S,c.EMPTY],[c.S,c.S,c.EMPTY,c.EMPTY],[c.EMPTY,c.EMPTY,c.EMPTY,c.EMPTY]],[[c.S,c.EMPTY,c.EMPTY,c.EMPTY],[c.S,c.S,c.EMPTY,c.EMPTY],[c.EMPTY,c.S,c.EMPTY,c.EMPTY],[c.EMPTY,c.EMPTY,c.EMPTY,c.EMPTY]]],z:[[[c.EMPTY,c.EMPTY,c.EMPTY,c.EMPTY],[c.Z,c.Z,c.EMPTY,c.EMPTY],[c.EMPTY,c.Z,c.Z,c.EMPTY],[c.EMPTY,c.EMPTY,c.EMPTY,c.EMPTY]],[[c.EMPTY,c.Z,c.EMPTY,c.EMPTY],[c.Z,c.Z,c.EMPTY,c.EMPTY],[c.Z,c.EMPTY,c.EMPTY,c.EMPTY],[c.EMPTY,c.EMPTY,c.EMPTY,c.EMPTY]]],i:[[[c.EMPTY,c.EMPTY,c.EMPTY,c.EMPTY],[c.I,c.I,c.I,c.I],[c.EMPTY,c.EMPTY,c.EMPTY,c.EMPTY],[c.EMPTY,c.EMPTY,c.EMPTY,c.EMPTY]],[[c.EMPTY,c.I,c.EMPTY,c.EMPTY],[c.EMPTY,c.I,c.EMPTY,c.EMPTY],[c.EMPTY,c.I,c.EMPTY,c.EMPTY],[c.EMPTY,c.I,c.EMPTY,c.EMPTY]]],j:[[[c.EMPTY,c.EMPTY,c.EMPTY,c.EMPTY],[c.J,c.J,c.J,c.EMPTY],[c.EMPTY,c.EMPTY,c.J,c.EMPTY],[c.EMPTY,c.EMPTY,c.EMPTY,c.EMPTY]],[[c.EMPTY,c.J,c.EMPTY,c.EMPTY],[c.EMPTY,c.J,c.EMPTY,c.EMPTY],[c.J,c.J,c.EMPTY,c.EMPTY],[c.EMPTY,c.EMPTY,c.EMPTY,c.EMPTY]],[[c.J,c.EMPTY,c.EMPTY,c.EMPTY],[c.J,c.J,c.J,c.EMPTY],[c.EMPTY,c.EMPTY,c.EMPTY,c.EMPTY],[c.EMPTY,c.EMPTY,c.EMPTY,c.EMPTY]],[[c.EMPTY,c.J,c.J,c.EMPTY],[c.EMPTY,c.J,c.EMPTY,c.EMPTY],[c.EMPTY,c.J,c.EMPTY,c.EMPTY],[c.EMPTY,c.EMPTY,c.EMPTY,c.EMPTY]]],t:[[[c.EMPTY,c.EMPTY,c.EMPTY,c.EMPTY],[c.T,c.T,c.T,c.EMPTY],[c.EMPTY,c.T,c.EMPTY,c.EMPTY],[c.EMPTY,c.EMPTY,c.EMPTY,c.EMPTY]],[[c.EMPTY,c.T,c.EMPTY,c.EMPTY],[c.T,c.T,c.EMPTY,c.EMPTY],[c.EMPTY,c.T,c.EMPTY,c.EMPTY],[c.EMPTY,c.EMPTY,c.EMPTY,c.EMPTY]],[[c.EMPTY,c.T,c.EMPTY,c.EMPTY],[c.T,c.T,c.T,c.EMPTY],[c.EMPTY,c.EMPTY,c.EMPTY,c.EMPTY],[c.EMPTY,c.EMPTY,c.EMPTY,c.EMPTY]],[[c.EMPTY,c.T,c.EMPTY,c.EMPTY],[c.EMPTY,c.T,c.T,c.EMPTY],[c.EMPTY,c.T,c.EMPTY,c.EMPTY],[c.EMPTY,c.EMPTY,c.EMPTY,c.EMPTY]]],l:[[[c.EMPTY,c.EMPTY,c.EMPTY,c.EMPTY],[c.L,c.L,c.L,c.EMPTY],[c.L,c.EMPTY,c.EMPTY,c.EMPTY],[c.EMPTY,c.EMPTY,c.EMPTY,c.EMPTY]],[[c.L,c.L,c.EMPTY,c.EMPTY],[c.EMPTY,c.L,c.EMPTY,c.EMPTY],[c.EMPTY,c.L,c.EMPTY,c.EMPTY],[c.EMPTY,c.EMPTY,c.EMPTY,c.EMPTY]],[[c.EMPTY,c.EMPTY,c.L,c.EMPTY],[c.L,c.L,c.L,c.EMPTY],[c.EMPTY,c.EMPTY,c.EMPTY,c.EMPTY],[c.EMPTY,c.EMPTY,c.EMPTY,c.EMPTY]],[[c.EMPTY,c.L,c.EMPTY,c.EMPTY],[c.EMPTY,c.L,c.EMPTY,c.EMPTY],[c.EMPTY,c.L,c.L,c.EMPTY],[c.EMPTY,c.EMPTY,c.EMPTY,c.EMPTY]]]},f=T(15),O=T(1),s=T(8),v=function(){return Array(10).fill(c.EMPTY)};function _(){var e=[c.I,c.J,c.L,c.O,c.S,c.T,c.Z],t=Math.floor(Math.random()*e.length);return{shape:e[t],offsetX:3,offsetY:0,rotation:0}}function d(e,t){var T=i[e.shape][e.rotation],E=[0,1,2,3];return E.every((function(n){return E.every((function(E){var r=e.offsetX+n,M=e.offsetY+E;return!(T[E][n]!==c.EMPTY&&(r<0||r>9||M>17||t[M][r]!==c.EMPTY))}))}))}function L(e){var t=Object(s.a)(e);return e.forEach((function(e,T){e.every((function(e){return e!==c.EMPTY}))&&(t.splice(T,1),t.unshift(v()))})),t}function B(e,t){var T=e.score,E=e.level;return T+u[t]*(E+1)}var b=function(e){var t=e.currentBlock.offsetY+1,T=Object(O.a)({},e.currentBlock,{offsetY:t});if(d(T,e.grid))return Object(O.a)({},e,{currentBlock:T});var E=function(e,t){var T=i[e.shape][e.rotation],E=[0,1,2,3],n=Object(s.a)(t);return E.forEach((function(t){E.forEach((function(E){var r=e.offsetX+t,M=e.offsetY+E,P=T[E][t];P!==c.EMPTY&&(n[M][r]=P)}))})),n}(e.currentBlock,e.grid),n=function(e){return e.map((function(e){return e.every((function(e){return e!==c.EMPTY}))?1:0})).reduce((function(e,t){return e+t}),0)}(E),r=e.lines+n,M=Math.floor(r/10),P=e.level>M?e.level:M;return Object(O.a)({},e,{lines:r,level:P,grid:L(E),currentBlock:e.nextBlock,nextBlock:_(),score:B(e,n)})};function h(e,t){switch(t.type){case o.MOVE_BLOCK_DOWN:return b(e);case o.MOVE_BLOCK_LEFT:return function(e){var t=e.currentBlock.offsetX-1,T=Object(O.a)({},e.currentBlock,{offsetX:t});return d(T,e.grid)?Object(O.a)({},e,{currentBlock:T}):e}(e);case o.MOVE_BLOCK_RIGHT:return function(e){var t=e.currentBlock.offsetX+1,T=Object(O.a)({},e.currentBlock,{offsetX:t});return d(T,e.grid)?Object(O.a)({},e,{currentBlock:T}):e}(e);case o.ROTATE_BLOCK_LEFT:return function(e){var t=i[e.currentBlock.shape],T=e.currentBlock.rotation,E=T>=t.length-1?Object(O.a)({},e.currentBlock,{rotation:0}):Object(O.a)({},e.currentBlock,{rotation:T+1});return d(E,e.grid)?Object(O.a)({},e,{currentBlock:E}):e}(e);case o.ROTATE_BLOCK_RIGHT:return e;case o.START_AUTO_DROP:return Object(O.a)({},e,{autoDrop:!0});case o.STOP_AUTO_DROP:return Object(O.a)({},e,{autoDrop:!1});default:return e}}var R={level:0,score:0,lines:0,autoDrop:!0,grid:Array(18).fill(null).map((function(){return v()})),currentBlock:_(),nextBlock:_(),keybindings:{37:o.MOVE_BLOCK_LEFT,38:o.ROTATE_BLOCK_LEFT,39:o.MOVE_BLOCK_RIGHT,40:o.MOVE_BLOCK_DOWN,41:o.ROTATE_BLOCK_RIGHT}},j=Object(E.createContext)({state:R,dispatch:function(){return null}});function k(e){var t=e.children,T=Object(E.useReducer)(h,R),r=Object(f.a)(T,2),M=r[0],P=r[1];return n.a.createElement(j.Provider,{value:{state:M,dispatch:P}},t)}function C(){var e=Object(E.useContext)(j),t=e.state,T=t.grid,r=t.currentBlock,M=t.level,u=t.autoDrop,f=e.dispatch;return P((function(){return f({type:o.MOVE_BLOCK_DOWN})}),u?(a[M]||a[a.length-1])/60*1e3:null),n.a.createElement(Y,{draw:function(e){e.clearRect(0,0,520,936),function(e){for(var t=0,E=0;E<10;t+=52,E++)for(var n=0,r=0;r<18;n+=52,r++){var M=T[r][E];e.fillStyle=l[M],e.fillRect(t,n,50,50)}}(e),function(e){for(var t=0,T=0;T<4;t+=52,T++)for(var E=0,n=0;n<4;E+=52,n++){var M=r.shape,P=r.rotation,Y=52*r.offsetX+t,u=52*r.offsetY+E,a=i[M][P][n][T];a!==c.EMPTY&&(e.fillStyle=l[a],e.fillRect(Y,u,50,50))}}(e)},width:520,height:936,delay:2})}function p(){var e=Object(E.useContext)(j),t=e.state.keybindings,T=e.dispatch;return Object(E.useEffect)((function(){var e=function(e){t[e.keyCode]===o.MOVE_BLOCK_DOWN&&T({type:o.STOP_AUTO_DROP}),T({type:t[e.keyCode]})};return window.addEventListener("keydown",e),function(){return window.removeEventListener("keydown",e)}}),[t,T]),Object(E.useEffect)((function(){var e=function(e){t[e.keyCode]===o.MOVE_BLOCK_DOWN&&T({type:o.START_AUTO_DROP})};return window.addEventListener("keyup",e),function(){return window.removeEventListener("keyup",e)}}),[t,T]),n.a.createElement(n.a.Fragment,null)}function y(){var e=Object(E.useContext)(j).state.score;return n.a.createElement("div",null,"Score: ",e)}function m(){var e=Object(E.useContext)(j).state.level;return n.a.createElement("div",null,"Level: ",e)}function K(){var e=Object(E.useContext)(j).state.nextBlock;return n.a.createElement(Y,{draw:function(t){for(var T=i[e.shape][e.rotation],E=0,n=0;n<4;E+=52,n++)for(var r=0,M=0;M<4;r+=52,M++){var P=T[M][n];t.fillStyle=l[P],t.fillRect(E,r,50,50)}},width:208,height:208,delay:2})}var S=T(5),A=T(6);function I(){var e=Object(S.a)(["\n  display: flex;\n  flex-direction: column;\n"]);return I=function(){return e},e}function g(){var e=Object(S.a)(["\n  display: flex;\n  justify-content: center;\n"]);return g=function(){return e},e}var w=A.a.div(g()),J=A.a.div(I());function D(){return n.a.createElement(k,null,n.a.createElement(p,null),n.a.createElement(C,null),n.a.createElement(J,null,n.a.createElement(K,null),n.a.createElement(y,null),n.a.createElement(m,null)))}function x(){return n.a.createElement(w,null,n.a.createElement(D,null))}function V(){return n.a.createElement(x,null)}M.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(V,null)),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.a93a7da9.chunk.js.map