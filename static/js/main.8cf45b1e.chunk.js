(this["webpackJsonptetris-ts"]=this["webpackJsonptetris-ts"]||[]).push([[0],{16:function(e,n,t){e.exports=t(23)},23:function(e,n,t){"use strict";t.r(n);var r,E=t(0),T=t.n(E),M=t(11),P=t.n(M),Y=t(15),a=t(1),c=[0,40,100,300,1200],o=[48,43,38,33,28,23,18,13,8,6,5,5,5,4,4,4,3,3,3,2,2,2,2,2,2,2,2,2,2,1];!function(e){e.EMPTY=" ",e.O="o",e.S="s",e.Z="z",e.I="i",e.J="j",e.T="t",e.L="l"}(r||(r={}));var u,l={" ":"#434c5e",o:"#bf616a",s:"#d08770",z:"#ebcb8b",i:"#a3be8c",j:"#b48ead",t:"#5e81ac",l:"#8fbcbb"};!function(e){e.MOVE_BLOCK_DOWN="MOVE_BLOCK_DOWN",e.MOVE_BLOCK_LEFT="MOVE_BLOCK_LEFT",e.MOVE_BLOCK_RIGHT="MOVE_BLOCK_RIGHT",e.ROTATE_BLOCK_LEFT="ROTATE_BLOCK_LEFT",e.ROTATE_BLOCK_RIGHT="ROTATE_BLOCK_RIGHT",e.STOP_AUTO_DROP="STOP_AUTO_DROP",e.START_AUTO_DROP="START_AUTO_DROP"}(u||(u={}));var i={o:[[[r.EMPTY,r.EMPTY,r.EMPTY,r.EMPTY],[r.EMPTY,r.O,r.O,r.EMPTY],[r.EMPTY,r.O,r.O,r.EMPTY],[r.EMPTY,r.EMPTY,r.EMPTY,r.EMPTY]]],s:[[[r.EMPTY,r.EMPTY,r.EMPTY,r.EMPTY],[r.EMPTY,r.S,r.S,r.EMPTY],[r.S,r.S,r.EMPTY,r.EMPTY],[r.EMPTY,r.EMPTY,r.EMPTY,r.EMPTY]],[[r.S,r.EMPTY,r.EMPTY,r.EMPTY],[r.S,r.S,r.EMPTY,r.EMPTY],[r.EMPTY,r.S,r.EMPTY,r.EMPTY],[r.EMPTY,r.EMPTY,r.EMPTY,r.EMPTY]]],z:[[[r.EMPTY,r.EMPTY,r.EMPTY,r.EMPTY],[r.Z,r.Z,r.EMPTY,r.EMPTY],[r.EMPTY,r.Z,r.Z,r.EMPTY],[r.EMPTY,r.EMPTY,r.EMPTY,r.EMPTY]],[[r.EMPTY,r.Z,r.EMPTY,r.EMPTY],[r.Z,r.Z,r.EMPTY,r.EMPTY],[r.Z,r.EMPTY,r.EMPTY,r.EMPTY],[r.EMPTY,r.EMPTY,r.EMPTY,r.EMPTY]]],i:[[[r.EMPTY,r.EMPTY,r.EMPTY,r.EMPTY],[r.I,r.I,r.I,r.I],[r.EMPTY,r.EMPTY,r.EMPTY,r.EMPTY],[r.EMPTY,r.EMPTY,r.EMPTY,r.EMPTY]],[[r.EMPTY,r.I,r.EMPTY,r.EMPTY],[r.EMPTY,r.I,r.EMPTY,r.EMPTY],[r.EMPTY,r.I,r.EMPTY,r.EMPTY],[r.EMPTY,r.I,r.EMPTY,r.EMPTY]]],j:[[[r.EMPTY,r.EMPTY,r.EMPTY,r.EMPTY],[r.J,r.J,r.J,r.EMPTY],[r.EMPTY,r.EMPTY,r.J,r.EMPTY],[r.EMPTY,r.EMPTY,r.EMPTY,r.EMPTY]],[[r.EMPTY,r.J,r.EMPTY,r.EMPTY],[r.EMPTY,r.J,r.EMPTY,r.EMPTY],[r.J,r.J,r.EMPTY,r.EMPTY],[r.EMPTY,r.EMPTY,r.EMPTY,r.EMPTY]],[[r.J,r.EMPTY,r.EMPTY,r.EMPTY],[r.J,r.J,r.J,r.EMPTY],[r.EMPTY,r.EMPTY,r.EMPTY,r.EMPTY],[r.EMPTY,r.EMPTY,r.EMPTY,r.EMPTY]],[[r.EMPTY,r.J,r.J,r.EMPTY],[r.EMPTY,r.J,r.EMPTY,r.EMPTY],[r.EMPTY,r.J,r.EMPTY,r.EMPTY],[r.EMPTY,r.EMPTY,r.EMPTY,r.EMPTY]]],t:[[[r.EMPTY,r.EMPTY,r.EMPTY,r.EMPTY],[r.T,r.T,r.T,r.EMPTY],[r.EMPTY,r.T,r.EMPTY,r.EMPTY],[r.EMPTY,r.EMPTY,r.EMPTY,r.EMPTY]],[[r.EMPTY,r.T,r.EMPTY,r.EMPTY],[r.T,r.T,r.EMPTY,r.EMPTY],[r.EMPTY,r.T,r.EMPTY,r.EMPTY],[r.EMPTY,r.EMPTY,r.EMPTY,r.EMPTY]],[[r.EMPTY,r.T,r.EMPTY,r.EMPTY],[r.T,r.T,r.T,r.EMPTY],[r.EMPTY,r.EMPTY,r.EMPTY,r.EMPTY],[r.EMPTY,r.EMPTY,r.EMPTY,r.EMPTY]],[[r.EMPTY,r.T,r.EMPTY,r.EMPTY],[r.EMPTY,r.T,r.T,r.EMPTY],[r.EMPTY,r.T,r.EMPTY,r.EMPTY],[r.EMPTY,r.EMPTY,r.EMPTY,r.EMPTY]]],l:[[[r.EMPTY,r.EMPTY,r.EMPTY,r.EMPTY],[r.L,r.L,r.L,r.EMPTY],[r.L,r.EMPTY,r.EMPTY,r.EMPTY],[r.EMPTY,r.EMPTY,r.EMPTY,r.EMPTY]],[[r.L,r.L,r.EMPTY,r.EMPTY],[r.EMPTY,r.L,r.EMPTY,r.EMPTY],[r.EMPTY,r.L,r.EMPTY,r.EMPTY],[r.EMPTY,r.EMPTY,r.EMPTY,r.EMPTY]],[[r.EMPTY,r.EMPTY,r.L,r.EMPTY],[r.L,r.L,r.L,r.EMPTY],[r.EMPTY,r.EMPTY,r.EMPTY,r.EMPTY],[r.EMPTY,r.EMPTY,r.EMPTY,r.EMPTY]],[[r.EMPTY,r.L,r.EMPTY,r.EMPTY],[r.EMPTY,r.L,r.EMPTY,r.EMPTY],[r.EMPTY,r.L,r.L,r.EMPTY],[r.EMPTY,r.EMPTY,r.EMPTY,r.EMPTY]]]},f=t(8),O=function(){return Array(10).fill(r.EMPTY)};function s(){var e=[r.I,r.J,r.L,r.O,r.S,r.T,r.Z],n=Math.floor(Math.random()*e.length);return{shape:e[n],offsetX:3,offsetY:0,rotation:0}}function d(e,n){var t=i[e.shape][e.rotation],E=[0,1,2,3];return E.every((function(T){return E.every((function(E){var M=e.offsetX+T,P=e.offsetY+E;return!(t[E][T]!==r.EMPTY&&(M<0||M>9||P>17||n[P][M]!==r.EMPTY))}))}))}function v(e){var n=Object(f.a)(e);return e.forEach((function(e,t){e.every((function(e){return e!==r.EMPTY}))&&(n.splice(t,1),n.unshift(O()))})),n}function b(e,n){var t=e.score,r=e.level;return t+c[n]*(r+1)}var _=function(e){var n=function(e,n){var t=i[e.shape][e.rotation],E=[0,1,2,3],T=Object(f.a)(n);return E.forEach((function(n){E.forEach((function(E){var M=e.offsetX+n,P=e.offsetY+E,Y=t[E][n];Y!==r.EMPTY&&(T[P][M]=Y)}))})),T}(e.currentBlock,e.grid),t=function(e){return e.map((function(e){return e.every((function(e){return e!==r.EMPTY}))?1:0})).reduce((function(e,n){return e+n}),0)}(n),E=e.lines+t,T=Math.floor(E/10),M=e.level>T?e.level:T,P=e.nextBlock,Y=!d(P,n);return Object(a.a)({},e,{lines:E,level:M,grid:v(n),currentBlock:P,nextBlock:s(),score:b(e,t),gameOver:Y})};function L(e,n){switch(n.type){case u.MOVE_BLOCK_DOWN:return function(e){var n=e.currentBlock.offsetY+1,t=Object(a.a)({},e.currentBlock,{offsetY:n});return d(t,e.grid)?Object(a.a)({},e,{currentBlock:t}):_(e)}(e);case u.MOVE_BLOCK_LEFT:return function(e){var n=e.currentBlock.offsetX-1,t=Object(a.a)({},e.currentBlock,{offsetX:n});return d(t,e.grid)?Object(a.a)({},e,{currentBlock:t}):e}(e);case u.MOVE_BLOCK_RIGHT:return function(e){var n=e.currentBlock.offsetX+1,t=Object(a.a)({},e.currentBlock,{offsetX:n});return d(t,e.grid)?Object(a.a)({},e,{currentBlock:t}):e}(e);case u.ROTATE_BLOCK_LEFT:return function(e){var n=i[e.currentBlock.shape],t=e.currentBlock.rotation,r=t>=n.length-1?Object(a.a)({},e.currentBlock,{rotation:0}):Object(a.a)({},e.currentBlock,{rotation:t+1});return d(r,e.grid)?Object(a.a)({},e,{currentBlock:r}):e}(e);case u.ROTATE_BLOCK_RIGHT:return e;case u.START_AUTO_DROP:return Object(a.a)({},e,{autoDrop:!0});case u.STOP_AUTO_DROP:return Object(a.a)({},e,{autoDrop:!1});default:return e}}var p={level:0,score:0,lines:0,autoDrop:!0,gameOver:!1,grid:Array(18).fill(null).map((function(){return O()})),currentBlock:s(),nextBlock:s(),keybindings:{37:u.MOVE_BLOCK_LEFT,38:u.ROTATE_BLOCK_LEFT,39:u.MOVE_BLOCK_RIGHT,40:u.MOVE_BLOCK_DOWN,41:u.ROTATE_BLOCK_RIGHT}},h=Object(E.createContext)({state:p,dispatch:function(){return null}});function B(e){var n=e.children,t=Object(E.useReducer)(L,p),r=Object(Y.a)(t,2),M=r[0],P=r[1];return T.a.createElement(h.Provider,{value:{state:M,dispatch:P}},n)}function m(){var e=Object(E.useContext)(h),n=e.state,t=n.keybindings,r=n.gameOver,M=e.dispatch;return Object(E.useEffect)((function(){var e=function(e){t[e.keyCode]===u.MOVE_BLOCK_DOWN&&M({type:u.STOP_AUTO_DROP}),M({type:t[e.keyCode]})};return window.addEventListener("keydown",e),function(){return window.removeEventListener("keydown",e)}}),[t,M]),Object(E.useEffect)((function(){var e=function(e){t[e.keyCode]===u.MOVE_BLOCK_DOWN&&!r&&M({type:u.START_AUTO_DROP})};return window.addEventListener("keyup",e),function(){return window.removeEventListener("keyup",e)}}),[t,M,r]),T.a.createElement(T.a.Fragment,null)}function g(e,n){var t=Object(E.useRef)();Object(E.useEffect)((function(){t.current=e}),[e]),Object(E.useEffect)((function(){if(null!==n){var e=setInterval((function(){return t.current&&t.current()}),n);return function(){return clearInterval(e)}}}),[n])}function j(e){var n=e.width,t=e.height,r=e.draw,M=e.delay,P=void 0===M?1e3:M,Y=Object(E.useRef)(null);return g((function(){var e=Y.current,n=null===e||void 0===e?void 0:e.getContext("2d");n&&r(n)}),P),T.a.createElement("canvas",{ref:Y,width:n,height:t})}var R=t(2),k=t(3);function y(){var e=Object(R.a)(["\n  height: 100%;\n\n  font-size: 2em;\n  color: #bf616a;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]);return y=function(){return e},e}function C(){var e=Object(R.a)(["\n  grid-area: details;\n  border-bottom: ",";\n\n  ul {\n    list-style-type: none;\n    padding: 5px;\n  }\n"]);return C=function(){return e},e}function w(){var e=Object(R.a)(["\n  grid-area: preview;\n\n  border-bottom: ",";\n  padding: 20px;\n"]);return w=function(){return e},e}function S(){var e=Object(R.a)(["\n  grid-area: arena;\n\n  border: ",";\n  border-left: 0px;\n  border-bottom: 0px;\n  border-top: 0px;\n\n  background: #4c566a; \n  width: ","px;\n  height: ","px;\n"]);return S=function(){return e},e}function A(){var e=Object(R.a)(["\n  color: #d8dee9;\n  font-weight: bold;\n\n  border: ",";\n  border-radius: ",'px;\n\n  display: grid;\n  grid-template-areas:\n    "arena arena details"\n    "arena arena preview"\n    "arena arena ."\n    "arena arena ."\n    "arena arena ."\n']);return A=function(){return e},e}function K(){var e=Object(R.a)(["\n  body {\n    background: #2e3440;\n    width: 100vw;\n    height: 100vh;\n    overflow: hidden;\n    margin 0;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n"]);return K=function(){return e},e}var x=Object(k.a)(K()),I="".concat(4,"px solid #4c566a"),J=k.b.div(A(),I,4),D=k.b.div(S(),I,468,844),V=k.b.div(w(),I),Z=k.b.div(C(),I),F=k.b.div(y());function G(){var e=Object(E.useContext)(h),n=e.state,t=n.grid,M=n.currentBlock,P=n.level,Y=n.autoDrop,a=n.gameOver,c=e.dispatch;return g((function(){return c({type:u.MOVE_BLOCK_DOWN})}),Y?(o[P]||o[o.length-1])/60*1e3:null),a?T.a.createElement(F,null,"GAME OVER"):T.a.createElement(j,{draw:function(e){e.clearRect(0,0,468,844),function(e){for(var n=0,r=0;r<10;n+=47,r++)for(var E=0,T=0;T<18;E+=47,T++){var M=t[T][r];e.fillStyle=l[M],e.fillRect(n,E,45,45)}}(e),function(e){for(var n=0,t=0;t<4;n+=47,t++)for(var E=0,T=0;T<4;E+=47,T++){var P=M.shape,Y=M.rotation,a=47*M.offsetX+n,c=47*M.offsetY+E,o=i[P][Y][T][t];o!==r.EMPTY&&(e.fillStyle=l[o],e.fillRect(a,c,45,45))}}(e)},width:468,height:844,delay:2})}function H(){var e=Object(E.useContext)(h).state,n=e.lines,t=e.level,r=e.score;return T.a.createElement("ul",null,T.a.createElement("li",null,"LINES: ",n),T.a.createElement("li",null,"LEVEL: ",t),T.a.createElement("li",null,"SCORE: ",r))}function N(){var e=Object(E.useContext)(h).state.nextBlock;return T.a.createElement(j,{draw:function(n){var t=i[e.shape][e.rotation];n.clearRect(0,0,188,188);for(var E=0,T=0;T<4;E+=47,T++)for(var M=0,P=0;P<4;M+=47,P++){var Y=t[P][T];Y!==r.EMPTY&&(n.fillStyle=l[Y],n.fillRect(E,M,45,45))}},width:188,height:188,delay:2})}function U(){return T.a.createElement(B,null,T.a.createElement(x,null),T.a.createElement(m,null),T.a.createElement(J,null,T.a.createElement(D,null,T.a.createElement(G,null)),T.a.createElement(Z,null,T.a.createElement(H,null)),T.a.createElement(V,null,T.a.createElement(N,null))))}function X(){return T.a.createElement(U,null)}P.a.render(T.a.createElement(T.a.StrictMode,null,T.a.createElement(X,null)),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.8cf45b1e.chunk.js.map