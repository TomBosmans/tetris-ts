{"version":3,"sources":["hooks/useInterval.ts","components/Canvas/Canvas.tsx","constants/index.ts","lib/index.ts","state/reducer.ts","utils/index.ts","PlayfieldProvider.tsx","components/Arena/Arena.tsx","components/Keybindings/Keybindings.tsx","components/Score/Score.tsx","components/Level/Level.tsx","components/Preview/Preview.tsx","styled/index.ts","components/Playfield/Playfield.tsx","components/Game/Game.tsx","App.tsx","index.tsx"],"names":["useInterval","callback","delay","savedCallback","useRef","useEffect","current","id","setInterval","clearInterval","Canvas","width","height","draw","ref","canvas","context","getContext","CELL","SCORES_PER_LINES","SPEED_PER_LEVEL","ACTION","CELL_COLORS","BLOCKS","EMPTY","O","S","Z","I","J","T","L","generateEmptyRow","Array","fill","randomBlock","possibleBlocks","randomIndex","Math","floor","random","length","shape","offsetX","offsetY","rotation","canBlockMove","block","grid","indexes","every","rowIndex","columnIndex","x","y","COLUMNS","ROWS","removeCompletedRows","newGrid","forEach","row","cell","splice","unshift","increaseScore","completedRowsCount","score","level","moveBlockDown","state","currentBlock","restBlock","map","reduce","a","b","totalCompletedRows","lines","newLevel","nextBlock","reducer","action","type","MOVE_BLOCK_DOWN","MOVE_BLOCK_LEFT","moveBlockLeft","MOVE_BLOCK_RIGHT","moveBlockRight","ROTATE_BLOCK_LEFT","rotations","currentRotation","rotateBlockLeft","ROTATE_BLOCK_RIGHT","START_AUTO_DROP","autoDrop","STOP_AUTO_DROP","initialState","keybindings","37","38","39","40","41","PlayfieldContext","createContext","dispatch","PlayfieldProvider","children","useReducer","Provider","value","Arena","useContext","clearRect","i","CELL_SIZE","j","fillStyle","fillRect","drawGrid","rectX","rectY","drawCurrentBlock","Keybindings","handleKey","event","keyCode","window","addEventListener","removeEventListener","Score","Level","Preview","Container","styled","div","SideContainer","Playfield","Game","App","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.a93a7da9.chunk.js","sourcesContent":["import { useEffect, useRef } from \"react\"\n\ntype CallbackFunction = () => void\n\nexport default function useInterval(callback: CallbackFunction, delay: number | null) {\n  const savedCallback = useRef<CallbackFunction>()\n\n  // Remember the latest callback.\n  useEffect(() => {\n    savedCallback.current = callback\n  }, [callback])\n\n  // Set up the interval.\n  useEffect(() => {\n    if (delay === null) return\n\n    const tick = () => savedCallback.current && savedCallback.current()\n    const id = setInterval(tick, delay)\n    return () => clearInterval(id)\n  }, [delay])\n}\n","import React, { useRef } from \"react\"\nimport { useInterval } from \"src/hooks\"\n\ntype Props = {\n  width: number\n  height: number\n  draw(context: CanvasRenderingContext2D): void\n  delay?: number\n}\n\nexport default function Canvas({ width, height, draw, delay=1000 }: Props) {\n  const ref = useRef<HTMLCanvasElement>(null)\n\n  useInterval(() => {\n    const canvas = ref.current\n    const context = canvas?.getContext(\"2d\")\n    if (context) draw(context)\n  }, delay);\n\n  return (\n    <canvas ref={ref} width={width} height={height} />\n  )\n}\n","import { Cell } from \"src/types\"\n\nexport const COLUMNS = 10\nexport const ROWS = 18\nexport const CELL_SIZE = 50\nexport const PADDING = 2\nexport const SCORES_PER_LINES = [0, 40, 100, 300, 1200]\nexport const SPEED_PER_LEVEL = [\n  48, 43, 38, 33, 28, 23, 18, 13,  8,  6,\n   5,  5,  5,  4,  4,  4,  3,  3,  3,  2,\n   2,  2,  2,  2,  2,  2,  2,  2,  2,  1\n]\n\nexport enum CELL {\n  EMPTY = \" \",\n      O = \"o\",\n      S = \"s\",\n      Z = \"z\",\n      I = \"i\",\n      J = \"j\",\n      T = \"t\",\n      L = \"l\"\n}\n\nexport const CELL_COLORS = {\n  \" \": \"#e5e9f0\",\n  \"o\": \"#bf616a\",\n  \"s\": \"#d08770\",\n  \"z\": \"#ebcb8b\",\n  \"i\": \"#a3be8c\",\n  \"j\": \"#b48ead\",\n  \"t\": \"#5e81ac\",\n  \"l\": \"#8fbcbb\"\n}\n\nexport enum ACTION {\n  MOVE_BLOCK_DOWN = \"MOVE_BLOCK_DOWN\",\n  MOVE_BLOCK_LEFT = \"MOVE_BLOCK_LEFT\",\n  MOVE_BLOCK_RIGHT = \"MOVE_BLOCK_RIGHT\",\n  ROTATE_BLOCK_LEFT = \"ROTATE_BLOCK_LEFT\",\n  ROTATE_BLOCK_RIGHT = \"ROTATE_BLOCK_RIGHT\",\n  STOP_AUTO_DROP = \"STOP_AUTO_DROP\",\n  START_AUTO_DROP = \"START_AUTO_DROP\"\n}\n\nconst o: Cell[][][] = [[\n  [CELL.EMPTY, CELL.EMPTY, CELL.EMPTY, CELL.EMPTY],\n  [CELL.EMPTY, CELL.O    , CELL.O    , CELL.EMPTY],\n  [CELL.EMPTY, CELL.O    , CELL.O    , CELL.EMPTY],\n  [CELL.EMPTY, CELL.EMPTY, CELL.EMPTY, CELL.EMPTY]\n]]\n\nconst s: Cell[][][] = [[\n  [CELL.EMPTY, CELL.EMPTY, CELL.EMPTY, CELL.EMPTY],\n  [CELL.EMPTY, CELL.S    , CELL.S    , CELL.EMPTY],\n  [CELL.S    , CELL.S    , CELL.EMPTY, CELL.EMPTY],\n  [CELL.EMPTY, CELL.EMPTY, CELL.EMPTY, CELL.EMPTY]\n],\n[\n  [CELL.S    , CELL.EMPTY, CELL.EMPTY, CELL.EMPTY],\n  [CELL.S    , CELL.S    , CELL.EMPTY, CELL.EMPTY],\n  [CELL.EMPTY, CELL.S    , CELL.EMPTY, CELL.EMPTY],\n  [CELL.EMPTY, CELL.EMPTY, CELL.EMPTY, CELL.EMPTY]\n]]\n\nconst z: Cell[][][] = [[\n  [CELL.EMPTY, CELL.EMPTY, CELL.EMPTY, CELL.EMPTY],\n  [CELL.Z    , CELL.Z    , CELL.EMPTY, CELL.EMPTY],\n  [CELL.EMPTY, CELL.Z    , CELL.Z    , CELL.EMPTY],\n  [CELL.EMPTY, CELL.EMPTY, CELL.EMPTY, CELL.EMPTY]\n],\n[\n  [CELL.EMPTY, CELL.Z    , CELL.EMPTY, CELL.EMPTY],\n  [CELL.Z    , CELL.Z    , CELL.EMPTY, CELL.EMPTY],\n  [CELL.Z    , CELL.EMPTY, CELL.EMPTY, CELL.EMPTY],\n  [CELL.EMPTY, CELL.EMPTY, CELL.EMPTY, CELL.EMPTY]\n]]\n\nconst i: Cell[][][] = [[\n  [CELL.EMPTY, CELL.EMPTY, CELL.EMPTY, CELL.EMPTY],\n  [CELL.I    , CELL.I    , CELL.I    , CELL.I    ],\n  [CELL.EMPTY, CELL.EMPTY, CELL.EMPTY, CELL.EMPTY],\n  [CELL.EMPTY, CELL.EMPTY, CELL.EMPTY, CELL.EMPTY]\n],\n[\n  [CELL.EMPTY, CELL.I    , CELL.EMPTY, CELL.EMPTY],\n  [CELL.EMPTY, CELL.I    , CELL.EMPTY, CELL.EMPTY],\n  [CELL.EMPTY, CELL.I    , CELL.EMPTY, CELL.EMPTY],\n  [CELL.EMPTY, CELL.I    , CELL.EMPTY, CELL.EMPTY]\n]]\n\nconst j: Cell[][][] = [[\n  [CELL.EMPTY, CELL.EMPTY, CELL.EMPTY, CELL.EMPTY],\n  [CELL.J    , CELL.J    , CELL.J    , CELL.EMPTY],\n  [CELL.EMPTY, CELL.EMPTY, CELL.J    , CELL.EMPTY],\n  [CELL.EMPTY, CELL.EMPTY, CELL.EMPTY, CELL.EMPTY]\n],\n[\n  [CELL.EMPTY, CELL.J    , CELL.EMPTY, CELL.EMPTY],\n  [CELL.EMPTY, CELL.J    , CELL.EMPTY, CELL.EMPTY],\n  [CELL.J    , CELL.J    , CELL.EMPTY, CELL.EMPTY],\n  [CELL.EMPTY, CELL.EMPTY, CELL.EMPTY, CELL.EMPTY]\n],\n[\n  [CELL.J    , CELL.EMPTY, CELL.EMPTY, CELL.EMPTY],\n  [CELL.J    , CELL.J    , CELL.J    , CELL.EMPTY],\n  [CELL.EMPTY, CELL.EMPTY, CELL.EMPTY, CELL.EMPTY],\n  [CELL.EMPTY, CELL.EMPTY, CELL.EMPTY, CELL.EMPTY]\n],\n[\n  [CELL.EMPTY, CELL.J, CELL.J, CELL.EMPTY],\n  [CELL.EMPTY, CELL.J, CELL.EMPTY, CELL.EMPTY],\n  [CELL.EMPTY, CELL.J, CELL.EMPTY, CELL.EMPTY],\n  [CELL.EMPTY, CELL.EMPTY, CELL.EMPTY, CELL.EMPTY]\n]]\n\nconst t: Cell[][][] = [[\n  [CELL.EMPTY, CELL.EMPTY, CELL.EMPTY, CELL.EMPTY],\n  [CELL.T    , CELL.T    , CELL.T    , CELL.EMPTY],\n  [CELL.EMPTY, CELL.T    , CELL.EMPTY, CELL.EMPTY],\n  [CELL.EMPTY, CELL.EMPTY, CELL.EMPTY, CELL.EMPTY]\n],\n[\n  [CELL.EMPTY, CELL.T    , CELL.EMPTY, CELL.EMPTY],\n  [CELL.T    , CELL.T    , CELL.EMPTY, CELL.EMPTY],\n  [CELL.EMPTY, CELL.T    , CELL.EMPTY, CELL.EMPTY],\n  [CELL.EMPTY, CELL.EMPTY, CELL.EMPTY, CELL.EMPTY]\n],\n[\n  [CELL.EMPTY, CELL.T    , CELL.EMPTY, CELL.EMPTY],\n  [CELL.T    , CELL.T    , CELL.T    , CELL.EMPTY],\n  [CELL.EMPTY, CELL.EMPTY, CELL.EMPTY, CELL.EMPTY],\n  [CELL.EMPTY, CELL.EMPTY, CELL.EMPTY, CELL.EMPTY]\n],\n[\n  [CELL.EMPTY, CELL.T    , CELL.EMPTY, CELL.EMPTY],\n  [CELL.EMPTY, CELL.T    , CELL.T    , CELL.EMPTY],\n  [CELL.EMPTY, CELL.T    , CELL.EMPTY, CELL.EMPTY],\n  [CELL.EMPTY, CELL.EMPTY, CELL.EMPTY, CELL.EMPTY]\n\n]]\n\nconst l: Cell[][][] = [[\n  [CELL.EMPTY, CELL.EMPTY, CELL.EMPTY, CELL.EMPTY],\n  [CELL.L    , CELL.L    , CELL.L    , CELL.EMPTY],\n  [CELL.L    , CELL.EMPTY, CELL.EMPTY, CELL.EMPTY],\n  [CELL.EMPTY, CELL.EMPTY, CELL.EMPTY, CELL.EMPTY]\n],\n[\n  [CELL.L    , CELL.L    , CELL.EMPTY, CELL.EMPTY],\n  [CELL.EMPTY, CELL.L    , CELL.EMPTY, CELL.EMPTY],\n  [CELL.EMPTY, CELL.L    , CELL.EMPTY, CELL.EMPTY],\n  [CELL.EMPTY, CELL.EMPTY, CELL.EMPTY, CELL.EMPTY]\n],\n[\n  [CELL.EMPTY, CELL.EMPTY, CELL.L    , CELL.EMPTY],\n  [CELL.L    , CELL.L    , CELL.L    , CELL.EMPTY],\n  [CELL.EMPTY, CELL.EMPTY, CELL.EMPTY, CELL.EMPTY],\n  [CELL.EMPTY, CELL.EMPTY, CELL.EMPTY, CELL.EMPTY]\n],\n[\n  [CELL.EMPTY, CELL.L    , CELL.EMPTY, CELL.EMPTY],\n  [CELL.EMPTY, CELL.L    , CELL.EMPTY, CELL.EMPTY],\n  [CELL.EMPTY, CELL.L    , CELL.L    , CELL.EMPTY],\n  [CELL.EMPTY, CELL.EMPTY, CELL.EMPTY, CELL.EMPTY]\n\n]]\n \nexport const BLOCKS: Record<string, Cell[][][]> = {\n  \"o\": o,\n  \"s\": s,\n  \"z\": z,\n  \"i\": i,\n  \"j\": j,\n  \"t\": t,\n  \"l\": l\n}\n","import { ROWS, COLUMNS, CELL, BLOCKS, SCORES_PER_LINES } from \"src/constants\"\nimport { Grid, Block, Row, PlayfieldState, Cell } from \"src/types\"\nimport { sum } from \"src/utils\"\n\nexport const generateEmptyRow = (): Row =>\n  Array(COLUMNS).fill(CELL.EMPTY)\n\nexport const generateGrid = (): Grid =>\n  Array(ROWS).fill(null).map(() => generateEmptyRow() )\n\nexport const generateBlock = (shape: string): Block => ({\n  shape: shape,\n  offsetX: 3,\n  offsetY: 0,\n  rotation: 0\n})\n\nexport function randomBlock(): Block {\n  const possibleBlocks = [CELL.I, CELL.J, CELL.L, CELL.O, CELL.S, CELL.T, CELL.Z]\n  const randomIndex = Math.floor(Math.random() * possibleBlocks.length)\n  return generateBlock(possibleBlocks[randomIndex])\n}\n\nexport function canBlockMove(block: Block, grid: Grid): boolean {\n  const shape: Grid = BLOCKS[block.shape][block.rotation]\n  const indexes = [0, 1, 2, 3]\n\n  return indexes.every((rowIndex) => {\n    return indexes.every((columnIndex) => {\n      const x = block.offsetX + rowIndex\n      const y = block.offsetY + columnIndex\n\n      const canMove = shape[columnIndex][rowIndex] !== CELL.EMPTY && (\n        x < 0 // left border\n        || x > COLUMNS - 1 // right border\n        || y > ROWS - 1 // bottom border\n        || grid[y][x] !== CELL.EMPTY // already filled\n      )\n\n      return !canMove\n    })\n  })\n}\n\nexport function restBlock(block: Block, grid: Grid): Grid {\n  const shape: Grid = BLOCKS[block.shape][block.rotation]\n  const indexes = [0, 1, 2, 3]\n  const newGrid = [...grid]\n\n  indexes.forEach((rowIndex) => {\n    indexes.forEach((columnIndex) => {\n      const x = block.offsetX + rowIndex\n      const y = block.offsetY + columnIndex\n      const cell = shape[columnIndex][rowIndex]\n\n      if (cell !== CELL.EMPTY) newGrid[y][x] = cell\n    })\n  })\n\n  return newGrid\n}\n\nexport function totalCompletedRows(grid: Grid): number {\n  return sum(grid.map((row: Row) => {\n    const complete = row.every((cell: Cell) => cell !== CELL.EMPTY) \n    return complete ? 1 : 0\n  }))\n}\n\nexport function removeCompletedRows(grid: Grid): Grid {\n  const newGrid = [...grid]\n  grid.forEach((row: Row, rowIndex: number) => {\n    const complete = row.every((cell: Cell) => cell !== CELL.EMPTY)\n    if (!complete) return\n    newGrid.splice(rowIndex, 1) // remove completed row\n    newGrid.unshift(generateEmptyRow()) // add new empty row on top\n  })\n\n  return newGrid\n}\n\nexport function increaseScore({ score, level }: PlayfieldState, completedRowsCount: number): number {\n  return score + SCORES_PER_LINES[completedRowsCount] * (level + 1)\n}\n","import { PlayfieldState, Action } from \"src/types\"\nimport { ACTION, BLOCKS } from \"src/constants\"\nimport { canBlockMove, restBlock, randomBlock, removeCompletedRows, totalCompletedRows, increaseScore } from \"src/lib\"\n\nconst moveBlockDown = (state: PlayfieldState): PlayfieldState => {\n  const offsetY = state.currentBlock.offsetY + 1\n  const currentBlock = { ...state.currentBlock, offsetY: offsetY }\n  const canMove = canBlockMove(currentBlock, state.grid)\n\n  if (canMove) return { ...state, currentBlock: currentBlock }\n\n  const grid = restBlock(state.currentBlock, state.grid)\n  const completedRowsCount = totalCompletedRows(grid)\n  const lines = state.lines + completedRowsCount\n  const newLevel = Math.floor(lines/10)\n  const level = state.level > newLevel ? state.level : newLevel\n  return {\n    ...state,\n    lines: lines,\n    level: level,\n    grid: removeCompletedRows(grid),\n    currentBlock: state.nextBlock,\n    nextBlock: randomBlock(),\n    score: increaseScore(state, completedRowsCount)\n  }\n}\n\nconst moveBlockLeft = (state: PlayfieldState): PlayfieldState => {\n  const offsetX = state.currentBlock.offsetX - 1\n  const currentBlock = { ...state.currentBlock, offsetX: offsetX }\n  return canBlockMove(currentBlock, state.grid) ?\n    { ...state, currentBlock: currentBlock } : state\n}\n\nconst moveBlockRight = (state: PlayfieldState): PlayfieldState => {\n  const offsetX = state.currentBlock.offsetX + 1\n  const currentBlock = { ...state.currentBlock, offsetX: offsetX }\n  return canBlockMove(currentBlock, state.grid) ?\n    { ...state, currentBlock: currentBlock } : state\n}\n\nconst rotateBlockLeft = (state: PlayfieldState): PlayfieldState => {\n  const rotations = BLOCKS[state.currentBlock.shape]\n  const currentRotation = state.currentBlock.rotation\n  const currentBlock = (currentRotation >= rotations.length - 1) ?\n    { ...state.currentBlock, rotation: 0 } :  { ...state.currentBlock, rotation: currentRotation + 1 }\n\n  return canBlockMove(currentBlock, state.grid) ?\n    { ...state, currentBlock: currentBlock } : state\n}\n\nconst rotateBlockRight = (state: PlayfieldState): PlayfieldState => {\n  return state\n}\n\nexport default function reducer(state: PlayfieldState, action: Action) {\n  switch(action.type) {\n    case ACTION.MOVE_BLOCK_DOWN:\n      return moveBlockDown(state)\n    case ACTION.MOVE_BLOCK_LEFT:\n      return moveBlockLeft(state)\n    case ACTION.MOVE_BLOCK_RIGHT:\n      return moveBlockRight(state)\n    case ACTION.ROTATE_BLOCK_LEFT:\n      return rotateBlockLeft(state)\n    case ACTION.ROTATE_BLOCK_RIGHT:\n      return rotateBlockRight(state)\n    case ACTION.START_AUTO_DROP:\n      return { ...state, autoDrop: true }\n    case ACTION.STOP_AUTO_DROP:\n      return { ...state, autoDrop: false }\n    default:\n      return state\n  }\n}\n","type TimesFunction = (index: number) => any\nexport const times = (number: number, f: TimesFunction): any[] =>\n  Array.from({ length: number }).map((_, i) => f(i))\n\nexport const sum = (array: number[]): number =>\n  array.reduce((a: number, b: number) => a + b, 0)\n","import React, { createContext, useReducer, Dispatch } from \"react\"\nimport { PlayfieldState } from \"src/types\"\nimport { reducer } from \"src/state\"\nimport { generateGrid, randomBlock } from \"src/lib\"\nimport { ACTION } from \"./constants\"\n\nconst initialState: PlayfieldState = {\n  level: 0,\n  score: 0,\n  lines: 0,\n  autoDrop: true,\n  grid: generateGrid(),\n  currentBlock: randomBlock(),\n  nextBlock: randomBlock(),\n  keybindings: {\n    37: ACTION.MOVE_BLOCK_LEFT,\n    38: ACTION.ROTATE_BLOCK_LEFT,\n    39: ACTION.MOVE_BLOCK_RIGHT,\n    40: ACTION.MOVE_BLOCK_DOWN,\n    41: ACTION.ROTATE_BLOCK_RIGHT\n  }\n}\n\ntype PlayfieldContext = {\n  state: PlayfieldState,\n  dispatch: Dispatch<any>\n}\n\nexport const PlayfieldContext = createContext<PlayfieldContext>({\n  state: initialState,\n  dispatch: () => null\n})\n\ntype Props = {\n  children: React.ReactNode\n}\n\nexport default function PlayfieldProvider({ children }: Props) {\n  const [state, dispatch] = useReducer(reducer, initialState)\n\n  return (\n    <PlayfieldContext.Provider value={{state, dispatch}}>\n      {children}\n    </PlayfieldContext.Provider>\n  )\n}\n","import React, { useContext } from \"react\"\nimport Canvas from \"src/components/Canvas\"\nimport { COLUMNS, ROWS, CELL_SIZE, PADDING, CELL_COLORS, BLOCKS, ACTION, CELL, SPEED_PER_LEVEL } from \"src/constants\"\nimport { Cell } from \"src/types\"\nimport { PlayfieldContext } from \"src/PlayfieldProvider\"\nimport { useInterval } from \"src/hooks\"\n\nexport default function Arena() {\n  const { state: { grid, currentBlock, level, autoDrop }, dispatch } = useContext(PlayfieldContext)\n\n  const width = COLUMNS * (CELL_SIZE + PADDING)\n  const height = ROWS * (CELL_SIZE + PADDING)\n\n  const drawGrid = (context: CanvasRenderingContext2D) => {\n    for (let x = 0, i = 0; i < COLUMNS; x+=CELL_SIZE + PADDING, i++) {\n      for (let y = 0, j=0; j < ROWS; y+=CELL_SIZE + PADDING, j++) {\n        const cell: Cell = grid[j][i]\n        context.fillStyle = CELL_COLORS[cell]\n        context.fillRect(x, y, CELL_SIZE, CELL_SIZE);\n      }\n    }\n  }\n\n  const drawCurrentBlock = (context: CanvasRenderingContext2D) => {\n    for (let x = 0, i = 0; i < 4; x+=CELL_SIZE + PADDING, i++) {\n      for (let y = 0, j=0; j < 4; y+=CELL_SIZE + PADDING, j++) {\n        const { shape, rotation } = currentBlock\n        const rectX = (CELL_SIZE + PADDING) * currentBlock.offsetX + x\n        const rectY = (CELL_SIZE + PADDING) * currentBlock.offsetY + y\n        const cell: Cell = BLOCKS[shape][rotation][j][i]\n        if (cell !== CELL.EMPTY) {\n          context.fillStyle = CELL_COLORS[cell]\n          context.fillRect(rectX, rectY, CELL_SIZE, CELL_SIZE);\n        }\n      }\n    }\n  }\n\n  const draw = (context: CanvasRenderingContext2D) => {\n    context.clearRect(0, 0, width, height);\n    drawGrid(context)\n    drawCurrentBlock(context)\n  }\n\n  const maxSpeed = SPEED_PER_LEVEL[SPEED_PER_LEVEL.length - 1]\n  const delay = autoDrop ? (SPEED_PER_LEVEL[level] || maxSpeed)/60 * 1000 : null\n  useInterval(() => dispatch({ type: ACTION.MOVE_BLOCK_DOWN }), delay)\n\n  return (\n    <Canvas draw={draw} width={width} height={height} delay={2} />\n  )\n}\n","import React, { useEffect, useContext } from \"react\"\nimport { PlayfieldContext } from \"src/PlayfieldProvider\"\nimport { ACTION } from \"src/constants\"\n\nexport default function Keybindings() {\n  const { state: { keybindings }, dispatch } = useContext(PlayfieldContext)\n\n  useEffect(() => {\n    const handleKey = (event: KeyboardEvent) => {\n      if (keybindings[event.keyCode] === ACTION.MOVE_BLOCK_DOWN) {\n        dispatch({ type: ACTION.STOP_AUTO_DROP })\n      }\n      dispatch({ type: keybindings[event.keyCode] })\n    }\n\n    window.addEventListener(\"keydown\", handleKey);\n    return () => window.removeEventListener(\"keydown\", handleKey)\n  }, [keybindings, dispatch])\n\n  useEffect(() => {\n    const handleKey = (event: KeyboardEvent) => {\n      if (keybindings[event.keyCode] === ACTION.MOVE_BLOCK_DOWN) {\n        dispatch({ type: ACTION.START_AUTO_DROP })\n      }\n    }\n\n    window.addEventListener(\"keyup\", handleKey);\n    return () => window.removeEventListener(\"keyup\", handleKey)\n  }, [keybindings, dispatch])\n\n  return (\n    <></>\n  )\n}\n","import React, { useContext } from \"react\"\nimport { PlayfieldContext } from \"src/PlayfieldProvider\"\n\nexport default function Score() {\n  const { state: { score } } = useContext(PlayfieldContext)\n\n  return (\n    <div>Score: {score}</div>\n  )\n}\n","import React, { useContext } from \"react\"\nimport { PlayfieldContext } from \"src/PlayfieldProvider\"\n\nexport default function Level() {\n  const { state: { level } } = useContext(PlayfieldContext)\n\n  return (\n    <div>Level: {level}</div>\n  )\n}\n","import React, { useContext } from \"react\"\nimport { PlayfieldContext } from \"src/PlayfieldProvider\"\nimport Canvas from \"../Canvas\"\nimport { CELL_SIZE, PADDING, BLOCKS, CELL_COLORS } from \"src/constants\"\nimport { Cell } from \"src/types\"\n\nexport default function Preview() {\n  const { state: { nextBlock } } = useContext(PlayfieldContext)\n\n  const size = 4 * (CELL_SIZE + PADDING)\n\n  const draw = (context: CanvasRenderingContext2D) => {\n    const grid = BLOCKS[nextBlock.shape][nextBlock.rotation]\n\n    for (let x = 0, i = 0; i < 4; x+=CELL_SIZE + PADDING, i++) {\n      for (let y = 0, j=0; j < 4; y+=CELL_SIZE + PADDING, j++) {\n        const cell: Cell = grid[j][i]\n        context.fillStyle = CELL_COLORS[cell]\n        context.fillRect(x, y, CELL_SIZE, CELL_SIZE);\n      }\n    }\n  }\n\n  return (\n    <Canvas draw={draw} width={size} height={size} delay={2}/>\n  )\n}\n","import styled from \"styled-components\";\n\nexport const Container = styled.div`\n  display: flex;\n  justify-content: center;\n`\n\nexport const SideContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n`\n","import React from \"react\"\nimport Arena from \"src/components/Arena\"\nimport Keybindings from \"src/components/Keybindings\"\nimport PlayfieldProvider from \"src/PlayfieldProvider\"\nimport Score from \"src/components/Score\"\nimport Level from \"src/components/Level\"\nimport Preview from \"src/components/Preview\"\nimport { SideContainer } from \"src/styled\"\n\nexport default function Playfield() {\n  return (\n    <PlayfieldProvider>\n      <Keybindings />\n      <Arena />\n      <SideContainer>\n        <Preview />\n        <Score />\n        <Level />\n      </SideContainer>\n    </PlayfieldProvider>\n )\n}\n","import React from \"react\"\nimport Playfield from \"src/components/Playfield\"\nimport { Container } from \"src/styled\"\n\nexport default function Game() {\n  return (\n    <Container>\n      <Playfield />\n    </Container>\n  )\n}\n","import React from \"react\"\nimport Game from \"./components/Game\"\n\nexport default function App() {\n  return (\n    <Game />\n  )\n}\n","import React from \"react\"\nimport ReactDOM from \"react-dom\"\nimport App from \"./App\"\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n)\n"],"sourceRoot":""}